<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>egrecho.utils.apply &mdash; egrecho  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=649a27d8" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx_paramlinks.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=4ea706d9"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="egrecho.utils.dummy.generate" href="egrecho.utils.dummy.html" />
    <link rel="prev" title="egrecho.core.teacher" href="../core/teacher.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            egrecho
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Content</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial_installation.html#virtual-environment">1. Virtual Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial_installation.html#pre-requirement">2. Pre-requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial_installation.html#install-repo">3. Install Repo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial_installation.html#developer-installation">Developer Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorial_installation.html#python-package-installation">Python package Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_dynamic_project.html">Dynamic Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../api.html">egrecho.core</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../core/config.html">egrecho.core.config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/config.html#egrecho.core.config.DataclassConfig"><code class="docutils literal notranslate"><span class="pre">DataclassConfig</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/config.html#egrecho.core.config.DataclassConfig.from_config"><code class="docutils literal notranslate"><span class="pre">from_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/config.html#egrecho.core.config.DataclassConfig.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core/data_builder.html">egrecho.core.data_builder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilderConfig"><code class="docutils literal notranslate"><span class="pre">DataBuilderConfig</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilderConfig.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder"><code class="docutils literal notranslate"><span class="pre">DataBuilder</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.from_config"><code class="docutils literal notranslate"><span class="pre">from_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.save_config"><code class="docutils literal notranslate"><span class="pre">save_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.dump_config"><code class="docutils literal notranslate"><span class="pre">dump_config()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.build_dataset"><code class="docutils literal notranslate"><span class="pre">build_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.build_single_dataset"><code class="docutils literal notranslate"><span class="pre">build_single_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.data_files"><code class="docutils literal notranslate"><span class="pre">data_files</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.estimate_length"><code class="docutils literal notranslate"><span class="pre">estimate_length()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.num_classes"><code class="docutils literal notranslate"><span class="pre">num_classes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.class_label"><code class="docutils literal notranslate"><span class="pre">class_label</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.feature_extractor"><code class="docutils literal notranslate"><span class="pre">feature_extractor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.feature_size"><code class="docutils literal notranslate"><span class="pre">feature_size</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/data_builder.html#egrecho.core.data_builder.DataBuilder.inputs_dim"><code class="docutils literal notranslate"><span class="pre">inputs_dim</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core/feature_extractor.html">egrecho.core.feature_extractor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/feature_extractor.html#egrecho.core.feature_extractor.BaseFeature"><code class="docutils literal notranslate"><span class="pre">BaseFeature</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/feature_extractor.html#egrecho.core.feature_extractor.BaseFeature.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/feature_extractor.html#egrecho.core.feature_extractor.BaseFeature.get_extractor_dict"><code class="docutils literal notranslate"><span class="pre">get_extractor_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/feature_extractor.html#egrecho.core.feature_extractor.BaseFeature.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/feature_extractor.html#egrecho.core.feature_extractor.BaseFeature.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core/loads.html">egrecho.core.loads</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/loads.html#egrecho.core.loads.save_ckpt_conf_dir"><code class="docutils literal notranslate"><span class="pre">save_ckpt_conf_dir()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/loads.html#egrecho.core.loads.ResolveModelResult"><code class="docutils literal notranslate"><span class="pre">ResolveModelResult</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/loads.html#egrecho.core.loads.ResolveModelResult.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/loads.html#egrecho.core.loads.resolve_pretrained_model"><code class="docutils literal notranslate"><span class="pre">resolve_pretrained_model()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/loads.html#egrecho.core.loads.load_module_class"><code class="docutils literal notranslate"><span class="pre">load_module_class()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/loads.html#egrecho.core.loads.load_model_type"><code class="docutils literal notranslate"><span class="pre">load_model_type()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/loads.html#egrecho.core.loads.load_extractor_type"><code class="docutils literal notranslate"><span class="pre">load_extractor_type()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core/module.html">egrecho.core.module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel"><code class="docutils literal notranslate"><span class="pre">TopVirtualModel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.setup"><code class="docutils literal notranslate"><span class="pre">setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.training_step"><code class="docutils literal notranslate"><span class="pre">training_step()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.validation_step"><code class="docutils literal notranslate"><span class="pre">validation_step()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.pipeline_out"><code class="docutils literal notranslate"><span class="pre">pipeline_out()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.on_train_start"><code class="docutils literal notranslate"><span class="pre">on_train_start()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.on_train_end"><code class="docutils literal notranslate"><span class="pre">on_train_end()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.configure_optimizers"><code class="docutils literal notranslate"><span class="pre">configure_optimizers()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.configure_teacher_callbacks"><code class="docutils literal notranslate"><span class="pre">configure_teacher_callbacks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.from_pretrained"><code class="docutils literal notranslate"><span class="pre">from_pretrained()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.auto"><code class="docutils literal notranslate"><span class="pre">auto()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.export_onnx"><code class="docutils literal notranslate"><span class="pre">export_onnx()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.TopVirtualModel.export_jit"><code class="docutils literal notranslate"><span class="pre">export_jit()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle"><code class="docutils literal notranslate"><span class="pre">DataMoudle</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.prepare_data_per_node"><code class="docutils literal notranslate"><span class="pre">prepare_data_per_node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.allow_zero_length_dataloader_with_multiple_devices"><code class="docutils literal notranslate"><span class="pre">allow_zero_length_dataloader_with_multiple_devices</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.setup"><code class="docutils literal notranslate"><span class="pre">setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.setup_data"><code class="docutils literal notranslate"><span class="pre">setup_data()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.train_dataset"><code class="docutils literal notranslate"><span class="pre">train_dataset</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.val_dataset"><code class="docutils literal notranslate"><span class="pre">val_dataset</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.module.DataMoudle.test_dataset"><code class="docutils literal notranslate"><span class="pre">test_dataset</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModuleConfig"><code class="docutils literal notranslate"><span class="pre">ModuleConfig</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModuleConfig.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModelBase"><code class="docutils literal notranslate"><span class="pre">ModelBase</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModelBase.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModelBase.post_init"><code class="docutils literal notranslate"><span class="pre">post_init()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModelBase.dummy_inputs"><code class="docutils literal notranslate"><span class="pre">dummy_inputs</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModelBase.export_onnx"><code class="docutils literal notranslate"><span class="pre">export_onnx()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/module.html#egrecho.core.model_base.ModelBase.export_jit"><code class="docutils literal notranslate"><span class="pre">export_jit()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core/optimization.html">egrecho.core.optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/optimization.html#module-egrecho.core.optimization.optims">optims</a></li>
<li class="toctree-l3"><a class="reference internal" href="../core/optimization.html#module-egrecho.core.optimization.schedulers">schedulers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core/parser.html">egrecho.core.parser</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.CommonParser"><code class="docutils literal notranslate"><span class="pre">CommonParser</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.CommonParser.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.CommonParser.add_class_args"><code class="docutils literal notranslate"><span class="pre">add_class_args()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.JsnDefaultHelpFormatter"><code class="docutils literal notranslate"><span class="pre">JsnDefaultHelpFormatter</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.JsnDefaultHelpFormatter.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.BaseCommand"><code class="docutils literal notranslate"><span class="pre">BaseCommand</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.BaseCommand.get_dummy_parser"><code class="docutils literal notranslate"><span class="pre">get_dummy_parser()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.BaseCommand.setup_parser"><code class="docutils literal notranslate"><span class="pre">setup_parser()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.parser.BaseCommand.run_from_args"><code class="docutils literal notranslate"><span class="pre">run_from_args()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/parser.html#module-egrecho.core.pl_parser">PL Parser</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.pl_parser.LightningParser"><code class="docutils literal notranslate"><span class="pre">LightningParser</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/parser.html#egrecho.core.pl_parser.SaveConfigCallback"><code class="docutils literal notranslate"><span class="pre">SaveConfigCallback</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core/teacher.html">egrecho.core.teacher</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher"><code class="docutils literal notranslate"><span class="pre">Teacher</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.attach_model"><code class="docutils literal notranslate"><span class="pre">attach_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.setup"><code class="docutils literal notranslate"><span class="pre">setup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.setup_model"><code class="docutils literal notranslate"><span class="pre">setup_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.setup_loss_fn_dict"><code class="docutils literal notranslate"><span class="pre">setup_loss_fn_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.setup_train_metrics"><code class="docutils literal notranslate"><span class="pre">setup_train_metrics()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.setup_val_metrics"><code class="docutils literal notranslate"><span class="pre">setup_val_metrics()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.training_step"><code class="docutils literal notranslate"><span class="pre">training_step()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.validation_step"><code class="docutils literal notranslate"><span class="pre">validation_step()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.on_train_start"><code class="docutils literal notranslate"><span class="pre">on_train_start()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.on_train_end"><code class="docutils literal notranslate"><span class="pre">on_train_end()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.available_optimizers"><code class="docutils literal notranslate"><span class="pre">available_optimizers()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.available_lr_schedulers"><code class="docutils literal notranslate"><span class="pre">available_lr_schedulers()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.configure_optimizers"><code class="docutils literal notranslate"><span class="pre">configure_optimizers()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.configure_single_optimizer"><code class="docutils literal notranslate"><span class="pre">configure_single_optimizer()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.instantiate_lr_scheduler"><code class="docutils literal notranslate"><span class="pre">instantiate_lr_scheduler()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.get_lr_scheduler_total_steps_name"><code class="docutils literal notranslate"><span class="pre">get_lr_scheduler_total_steps_name()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.configure_teacher_callbacks"><code class="docutils literal notranslate"><span class="pre">configure_teacher_callbacks()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.estimated_num_steps_per_epoch"><code class="docutils literal notranslate"><span class="pre">estimated_num_steps_per_epoch</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.Teacher.get_num_training_steps"><code class="docutils literal notranslate"><span class="pre">get_num_training_steps()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../core/teacher.html#egrecho.core.teacher.normalize_callable_dict"><code class="docutils literal notranslate"><span class="pre">normalize_callable_dict()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html#egrecho-utils">egrecho.utils</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">egrecho.utils.apply</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.apply.apply_to_collection"><code class="docutils literal notranslate"><span class="pre">apply_to_collection()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.common">egrecho.utils.common</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.alt_none"><code class="docutils literal notranslate"><span class="pre">alt_none()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.is_in_range"><code class="docutils literal notranslate"><span class="pre">is_in_range()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.ObjectDict"><code class="docutils literal notranslate"><span class="pre">ObjectDict</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.DataclassSerialMixin"><code class="docutils literal notranslate"><span class="pre">DataclassSerialMixin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.common.DataclassSerialMixin.to_dict"><code class="docutils literal notranslate"><span class="pre">to_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.common.DataclassSerialMixin.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.fields_init_var"><code class="docutils literal notranslate"><span class="pre">fields_init_var()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.batched"><code class="docutils literal notranslate"><span class="pre">batched()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.camelcase_to_snakecase"><code class="docutils literal notranslate"><span class="pre">camelcase_to_snakecase()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.snakecase_to_camelcase"><code class="docutils literal notranslate"><span class="pre">snakecase_to_camelcase()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.get_diff_dict"><code class="docutils literal notranslate"><span class="pre">get_diff_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.del_default_dict"><code class="docutils literal notranslate"><span class="pre">del_default_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.dict_union"><code class="docutils literal notranslate"><span class="pre">dict_union()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.common.list2tuple"><code class="docutils literal notranslate"><span class="pre">list2tuple()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.constants">egrecho.utils.constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.cuda_utils">egrecho.utils.cuda_utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.set_to_cuda"><code class="docutils literal notranslate"><span class="pre">set_to_cuda()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.get_current_device"><code class="docutils literal notranslate"><span class="pre">get_current_device()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.to_device"><code class="docutils literal notranslate"><span class="pre">to_device()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.parse_gpus"><code class="docutils literal notranslate"><span class="pre">parse_gpus()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.parse_gpus_opt"><code class="docutils literal notranslate"><span class="pre">parse_gpus_opt()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.synchronize"><code class="docutils literal notranslate"><span class="pre">synchronize()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.peak_cuda_memory"><code class="docutils literal notranslate"><span class="pre">peak_cuda_memory()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.release_memory"><code class="docutils literal notranslate"><span class="pre">release_memory()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.AutoGPUMode"><code class="docutils literal notranslate"><span class="pre">AutoGPUMode</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.GPUManager"><code class="docutils literal notranslate"><span class="pre">GPUManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.cuda_utils.GPUManager.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.cuda_utils.GPUManager.new_query"><code class="docutils literal notranslate"><span class="pre">new_query()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.cuda_utils.GPUManager.detect"><code class="docutils literal notranslate"><span class="pre">detect()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.cuda_utils.GPUManager.auto_choice"><code class="docutils literal notranslate"><span class="pre">auto_choice()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.device2gpu_id"><code class="docutils literal notranslate"><span class="pre">device2gpu_id()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.num_gpus"><code class="docutils literal notranslate"><span class="pre">num_gpus()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.is_cuda_available"><code class="docutils literal notranslate"><span class="pre">is_cuda_available()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.patch_nvml_check_env"><code class="docutils literal notranslate"><span class="pre">patch_nvml_check_env()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.cuda_utils.NVMLDeviceCount"><code class="docutils literal notranslate"><span class="pre">NVMLDeviceCount</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.data_utils">egrecho.utils.data_utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.split_sequence"><code class="docutils literal notranslate"><span class="pre">split_sequence()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.Dillable"><code class="docutils literal notranslate"><span class="pre">Dillable</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.iflatmap_unordered"><code class="docutils literal notranslate"><span class="pre">iflatmap_unordered()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.buffer_shuffle"><code class="docutils literal notranslate"><span class="pre">buffer_shuffle()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.ichunk_size"><code class="docutils literal notranslate"><span class="pre">ichunk_size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.ilen"><code class="docutils literal notranslate"><span class="pre">ilen()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.zip_dict"><code class="docutils literal notranslate"><span class="pre">zip_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.ClassLabel"><code class="docutils literal notranslate"><span class="pre">ClassLabel</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.data_utils.ClassLabel.str2int"><code class="docutils literal notranslate"><span class="pre">str2int()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.data_utils.ClassLabel.int2str"><code class="docutils literal notranslate"><span class="pre">int2str()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.data_utils.ClassLabel.from_dict"><code class="docutils literal notranslate"><span class="pre">from_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.data_utils.ClassLabel.to_file"><code class="docutils literal notranslate"><span class="pre">to_file()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.data_utils.ClassLabel.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.SplitInfo"><code class="docutils literal notranslate"><span class="pre">SplitInfo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.data_utils.SplitInfo.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.SplitInfoDict"><code class="docutils literal notranslate"><span class="pre">SplitInfoDict</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.data_utils.SplitInfoDict.total_num_examples"><code class="docutils literal notranslate"><span class="pre">total_num_examples</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.try_length"><code class="docutils literal notranslate"><span class="pre">try_length()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.data_utils.wavscp2dicts"><code class="docutils literal notranslate"><span class="pre">wavscp2dicts()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.dist">egrecho.utils.dist</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.dist.send_exit_ddp"><code class="docutils literal notranslate"><span class="pre">send_exit_ddp()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.dist.get_free_port"><code class="docutils literal notranslate"><span class="pre">get_free_port()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.dist.is_port_in_use"><code class="docutils literal notranslate"><span class="pre">is_port_in_use()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.dist.DistInfo"><code class="docutils literal notranslate"><span class="pre">DistInfo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.DistInfo.detect"><code class="docutils literal notranslate"><span class="pre">detect()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.DistInfo.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.dist.WorkerInfo"><code class="docutils literal notranslate"><span class="pre">WorkerInfo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.WorkerInfo.detect"><code class="docutils literal notranslate"><span class="pre">detect()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.WorkerInfo.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.dist.EnvInfo"><code class="docutils literal notranslate"><span class="pre">EnvInfo</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.EnvInfo.from_args"><code class="docutils literal notranslate"><span class="pre">from_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.EnvInfo.num_shards"><code class="docutils literal notranslate"><span class="pre">num_shards</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.EnvInfo.shard_rank"><code class="docutils literal notranslate"><span class="pre">shard_rank</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.EnvInfo.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.dist.TorchMPLauncher"><code class="docutils literal notranslate"><span class="pre">TorchMPLauncher</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.TorchMPLauncher.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.dist.TorchMPLauncher.launch"><code class="docutils literal notranslate"><span class="pre">launch()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.imports">egrecho.utils.imports</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.imports.is_package_available"><code class="docutils literal notranslate"><span class="pre">is_package_available()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.imports.is_module_available"><code class="docutils literal notranslate"><span class="pre">is_module_available()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.imports.compare_version"><code class="docutils literal notranslate"><span class="pre">compare_version()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.imports.lazy_import"><code class="docutils literal notranslate"><span class="pre">lazy_import()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.imports.LazyModule"><code class="docutils literal notranslate"><span class="pre">LazyModule</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.imports.LazyModule.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.logging">egrecho.utils.logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.logging.get_logger"><code class="docutils literal notranslate"><span class="pre">get_logger()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.logging.Logger"><code class="docutils literal notranslate"><span class="pre">Logger</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.info"><code class="docutils literal notranslate"><span class="pre">info()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.info_once"><code class="docutils literal notranslate"><span class="pre">info_once()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.warning"><code class="docutils literal notranslate"><span class="pre">warning()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.warning_once"><code class="docutils literal notranslate"><span class="pre">warning_once()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.debug"><code class="docutils literal notranslate"><span class="pre">debug()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.error"><code class="docutils literal notranslate"><span class="pre">error()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.logging.Logger.error_once"><code class="docutils literal notranslate"><span class="pre">error_once()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.misc">egrecho.utils.misc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.ConfigurationException"><code class="docutils literal notranslate"><span class="pre">ConfigurationException</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.NoneDataException"><code class="docutils literal notranslate"><span class="pre">NoneDataException</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.parse_bytes"><code class="docutils literal notranslate"><span class="pre">parse_bytes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.kill_name_proc"><code class="docutils literal notranslate"><span class="pre">kill_name_proc()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.valid_import_clspath"><code class="docutils literal notranslate"><span class="pre">valid_import_clspath()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.class2str"><code class="docutils literal notranslate"><span class="pre">class2str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.get_import_path"><code class="docutils literal notranslate"><span class="pre">get_import_path()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.misc.locate_"><code class="docutils literal notranslate"><span class="pre">locate_()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.register">egrecho.utils.register</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.register.Register"><code class="docutils literal notranslate"><span class="pre">Register</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.Register.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.Register.register"><code class="docutils literal notranslate"><span class="pre">register()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.Register.get"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.Register.keys"><code class="docutils literal notranslate"><span class="pre">keys()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.register.ExternalRegister"><code class="docutils literal notranslate"><span class="pre">ExternalRegister</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.register.ConcatRegister"><code class="docutils literal notranslate"><span class="pre">ConcatRegister</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.ConcatRegister.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.ConcatRegister.get"><code class="docutils literal notranslate"><span class="pre">get()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.ConcatRegister.keys"><code class="docutils literal notranslate"><span class="pre">keys()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.register.StrRegister"><code class="docutils literal notranslate"><span class="pre">StrRegister</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.StrRegister.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.StrRegister.register"><code class="docutils literal notranslate"><span class="pre">register()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.StrRegister.keys"><code class="docutils literal notranslate"><span class="pre">keys()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.register.ConcatStrRegister"><code class="docutils literal notranslate"><span class="pre">ConcatStrRegister</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.ConcatStrRegister.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.register.ConcatStrRegister.keys"><code class="docutils literal notranslate"><span class="pre">keys()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.torch_utils">egrecho.utils.torch_utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.torch_utils.RandomValue"><code class="docutils literal notranslate"><span class="pre">RandomValue</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.torch_utils.RandomValue.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.torch_utils.batch_pad_right"><code class="docutils literal notranslate"><span class="pre">batch_pad_right()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.torch_utils.pad_right_to"><code class="docutils literal notranslate"><span class="pre">pad_right_to()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.torch_utils.audio_collate_fn"><code class="docutils literal notranslate"><span class="pre">audio_collate_fn()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.torch_utils.to_numpy"><code class="docutils literal notranslate"><span class="pre">to_numpy()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-egrecho.utils.types">egrecho.utils.types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.types.ModelOutput"><code class="docutils literal notranslate"><span class="pre">ModelOutput</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.types.ModelOutput.setdefault"><code class="docutils literal notranslate"><span class="pre">setdefault()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.types.ModelOutput.pop"><code class="docutils literal notranslate"><span class="pre">pop()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.types.ModelOutput.update"><code class="docutils literal notranslate"><span class="pre">update()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.types.ModelOutput.to_tuple"><code class="docutils literal notranslate"><span class="pre">to_tuple()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.types.PipeOutput"><code class="docutils literal notranslate"><span class="pre">PipeOutput</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.types.SingletonMeta"><code class="docutils literal notranslate"><span class="pre">SingletonMeta</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.types.SingletonMeta.__call__"><code class="docutils literal notranslate"><span class="pre">__call__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.types.StrEnum"><code class="docutils literal notranslate"><span class="pre">StrEnum</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.types.StrEnum.from_str"><code class="docutils literal notranslate"><span class="pre">from_str()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#egrecho.utils.types.StrEnum.try_from_str"><code class="docutils literal notranslate"><span class="pre">try_from_str()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#egrecho.utils.types.Split"><code class="docutils literal notranslate"><span class="pre">Split</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#egrecho-utils-dummy">egrecho.utils.dummy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.dummy.html">egrecho.utils.dummy.generate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#egrecho-utils-io">egrecho.utils.io</a><ul>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.io.html">egrecho.utils.io.files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.Url"><code class="docutils literal notranslate"><span class="pre">Url</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.is_remote_url"><code class="docutils literal notranslate"><span class="pre">is_remote_url()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.get_filename"><code class="docutils literal notranslate"><span class="pre">get_filename()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.DataFilesList"><code class="docutils literal notranslate"><span class="pre">DataFilesList</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.sanitize_patterns"><code class="docutils literal notranslate"><span class="pre">sanitize_patterns()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.DataFilesDict"><code class="docutils literal notranslate"><span class="pre">DataFilesDict</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.resolve_patterns_locally_or_by_urls"><code class="docutils literal notranslate"><span class="pre">resolve_patterns_locally_or_by_urls()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.resolve_patterns"><code class="docutils literal notranslate"><span class="pre">resolve_patterns()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.files.resolve_file"><code class="docutils literal notranslate"><span class="pre">resolve_file()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.kaldi">egrecho.utils.io.kaldi</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.valid_kaldi_storage_name"><code class="docutils literal notranslate"><span class="pre">valid_kaldi_storage_name()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.close_cached_kaldi_handles"><code class="docutils literal notranslate"><span class="pre">close_cached_kaldi_handles()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.lookup_matrix_reader_cache_or_open"><code class="docutils literal notranslate"><span class="pre">lookup_matrix_reader_cache_or_open()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.lookup_vector_reader_cache_or_open"><code class="docutils literal notranslate"><span class="pre">lookup_vector_reader_cache_or_open()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.KaldiVectorReader"><code class="docutils literal notranslate"><span class="pre">KaldiVectorReader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.KaldiVectorWriter"><code class="docutils literal notranslate"><span class="pre">KaldiVectorWriter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.KaldiMatrixReader"><code class="docutils literal notranslate"><span class="pre">KaldiMatrixReader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.kaldi.KaldiMatrixWriter"><code class="docutils literal notranslate"><span class="pre">KaldiMatrixWriter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.reader">egrecho.utils.io.reader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.reader.JsonlIterable"><code class="docutils literal notranslate"><span class="pre">JsonlIterable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.reader.JsonIterable"><code class="docutils literal notranslate"><span class="pre">JsonIterable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.reader.CsvIterable"><code class="docutils literal notranslate"><span class="pre">CsvIterable</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.resolve_ckpt">egrecho.utils.io.resolve_ckpt</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.resolve_ckpt.resolve_ckpt"><code class="docutils literal notranslate"><span class="pre">resolve_ckpt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.resolve_ckpt.resolve_version_ckpt"><code class="docutils literal notranslate"><span class="pre">resolve_version_ckpt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt"><code class="docutils literal notranslate"><span class="pre">resolve_rel_ckpt()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.utils">egrecho.utils.io.utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.auto_open"><code class="docutils literal notranslate"><span class="pre">auto_open()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.JsonMixin"><code class="docutils literal notranslate"><span class="pre">JsonMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.YamlMixin"><code class="docutils literal notranslate"><span class="pre">YamlMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.ConfigFileMixin"><code class="docutils literal notranslate"><span class="pre">ConfigFileMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.DictFileMixin"><code class="docutils literal notranslate"><span class="pre">DictFileMixin</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.SerializationFn"><code class="docutils literal notranslate"><span class="pre">SerializationFn</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.load_jsonl_lazy"><code class="docutils literal notranslate"><span class="pre">load_jsonl_lazy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.save_jsonl"><code class="docutils literal notranslate"><span class="pre">save_jsonl()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.load_csv_lazy"><code class="docutils literal notranslate"><span class="pre">load_csv_lazy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.repr_dict"><code class="docutils literal notranslate"><span class="pre">repr_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.InvalidPathExtension"><code class="docutils literal notranslate"><span class="pre">InvalidPathExtension</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.buf_count_newlines"><code class="docutils literal notranslate"><span class="pre">buf_count_newlines()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.read_key_first_lists"><code class="docutils literal notranslate"><span class="pre">read_key_first_lists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.read_lists"><code class="docutils literal notranslate"><span class="pre">read_lists()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.read_key_first_lists_lazy"><code class="docutils literal notranslate"><span class="pre">read_key_first_lists_lazy()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.read_lists_lazy"><code class="docutils literal notranslate"><span class="pre">read_lists_lazy()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.writer">egrecho.utils.io.writer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.writer.SequentialDewWriter"><code class="docutils literal notranslate"><span class="pre">SequentialDewWriter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.writer.ShardWriter"><code class="docutils literal notranslate"><span class="pre">ShardWriter</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#egrecho-utils-patch">egrecho.utils.patch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.patch.html">egrecho.utils.patch.io_patch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.io_patch.gzip_open_patch"><code class="docutils literal notranslate"><span class="pre">gzip_open_patch()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.io_patch.AltGzipFile"><code class="docutils literal notranslate"><span class="pre">AltGzipFile</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.io_patch.FsspecLocalGlob"><code class="docutils literal notranslate"><span class="pre">FsspecLocalGlob</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.io_patch.make_path_posix"><code class="docutils literal notranslate"><span class="pre">make_path_posix()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.io_patch.stringify_path"><code class="docutils literal notranslate"><span class="pre">stringify_path()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.patch.html#module-egrecho.utils.patch.torchdata_patch">egrecho.utils.patch.torchdata_patch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.torchdata_patch.validate_input_col"><code class="docutils literal notranslate"><span class="pre">validate_input_col()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.torchdata_patch.StreamWrapper"><code class="docutils literal notranslate"><span class="pre">StreamWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.html#egrecho.utils.patch.torchdata_patch.DataChunk"><code class="docutils literal notranslate"><span class="pre">DataChunk</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.patch.html#egrecho-utils-patch-simple-parse-patch">egrecho.utils.patch.simple_parse_patch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html">egrecho.utils.patch.simple_parse_patch._utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html#module-egrecho.utils.patch.simple_parse_patch.decoding">egrecho.utils.patch.simple_parse_patch.decoding</a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html#module-egrecho.utils.patch.simple_parse_patch.serializable">egrecho.utils.patch.simple_parse_patch.serializable</a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html#egrecho-utils-patch-simple-parse-patch-annotation-utils">egrecho.utils.patch.simple_parse_patch.annotation_utils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#egrecho-utils-seeder">egrecho.utils.seeder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.seeder.html">egrecho.utils.seeder.seed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.seeder.html#egrecho.utils.seeder.seed.SeedWorkers"><code class="docutils literal notranslate"><span class="pre">SeedWorkers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.seeder.html#egrecho.utils.seeder.seed.isolate_rng"><code class="docutils literal notranslate"><span class="pre">isolate_rng()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html#egrecho-pipeline">egrecho.pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/index.html">egrecho.pipeline.base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.DeviceMode"><code class="docutils literal notranslate"><span class="pre">DeviceMode</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine"><code class="docutils literal notranslate"><span class="pre">PipeLine</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.resolve_pretrained_model"><code class="docutils literal notranslate"><span class="pre">resolve_pretrained_model()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.from_pretrained"><code class="docutils literal notranslate"><span class="pre">from_pretrained()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.preprocess"><code class="docutils literal notranslate"><span class="pre">preprocess()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.postprocess"><code class="docutils literal notranslate"><span class="pre">postprocess()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.forward"><code class="docutils literal notranslate"><span class="pre">forward()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.__call__"><code class="docutils literal notranslate"><span class="pre">__call__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipeLine.to"><code class="docutils literal notranslate"><span class="pre">to()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipelineDataset"><code class="docutils literal notranslate"><span class="pre">PipelineDataset</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipelineDataset.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipelineIterator"><code class="docutils literal notranslate"><span class="pre">PipelineIterator</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipelineIterator.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.base.PipelineIterator.loader_batch_item"><code class="docutils literal notranslate"><span class="pre">loader_batch_item()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/index.html#module-egrecho.pipeline.speaker_embedding">egrecho.pipeline.speaker_embedding</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.speaker_embedding.SpeakerEmbedding"><code class="docutils literal notranslate"><span class="pre">SpeakerEmbedding</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.speaker_embedding.SpeakerEmbedding.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.speaker_embedding.SpeakerEmbedding.from_pretrained"><code class="docutils literal notranslate"><span class="pre">from_pretrained()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.speaker_embedding.SpeakerEmbedding.__call__"><code class="docutils literal notranslate"><span class="pre">__call__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.speaker_embedding.SpeakerEmbedding.preprocess"><code class="docutils literal notranslate"><span class="pre">preprocess()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../pipeline/index.html#egrecho.pipeline.speaker_embedding.SpeakerEmbedding.postprocess"><code class="docutils literal notranslate"><span class="pre">postprocess()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">egrecho</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">egrecho.core</a></li>
      <li class="breadcrumb-item active">egrecho.utils.apply</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-egrecho.utils.apply">
<span id="egrecho-utils-apply"></span><h1>egrecho.utils.apply<a class="headerlink" href="#module-egrecho.utils.apply" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.apply.apply_to_collection">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.apply.</span></span><span class="sig-name descname"><span class="pre">apply_to_collection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wrong_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_none</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_frozen</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/apply.py#L14-L138"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.apply.apply_to_collection" title="Permalink to this definition"></a></dt>
<dd><p>Recursively applies a function to all elements of a certain dtype.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.data"></span><strong>data</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.data">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span>) – the collection to apply the function to</p></li>
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.dtype"></span><strong>dtype</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.dtype">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]]</span>) – the given function will be applied to all elements of this dtype</p></li>
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.function"></span><strong>function</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.function">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></span>) – the function to apply</p></li>
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.*args">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span>) – positional arguments (will be forwarded to calls of <code class="docutils literal notranslate"><span class="pre">function</span></code>)</p></li>
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.wrong_dtype"></span><strong>wrong_dtype</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.wrong_dtype">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">...</span></code>], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</span>) – the given function won’t be applied if this type is specified and the given collections
is of the <code class="docutils literal notranslate"><span class="pre">wrong_dtype</span></code> even if it is of type <code class="docutils literal notranslate"><span class="pre">dtype</span></code></p></li>
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.include_none"></span><strong>include_none</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.include_none">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Whether to include an element if the output of <code class="docutils literal notranslate"><span class="pre">function</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.allow_frozen"></span><strong>allow_frozen</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.allow_frozen">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Whether not to error upon encountering a frozen dataclass instance.</p></li>
<li><p><span class="target" id="egrecho.utils.apply.apply_to_collection.params.**kwargs"></span><strong>**kwargs</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.apply.apply_to_collection.params.**kwargs">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span>) – keyword arguments (will be forwarded to calls of <code class="docutils literal notranslate"><span class="pre">function</span></code>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The resulting collection</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-egrecho.utils.common">
<span id="egrecho-utils-common"></span><h1>egrecho.utils.common<a class="headerlink" href="#module-egrecho.utils.common" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.alt_none">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">alt_none</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alt_item</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L26-L30"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.alt_none" title="Permalink to this definition"></a></dt>
<dd><p>Replace None with  <code class="docutils literal notranslate"><span class="pre">alt_item</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.is_in_range">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">is_in_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L33-L56"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.is_in_range" title="Permalink to this definition"></a></dt>
<dd><p>Value in range judging.</p>
<p>Range is close interval (e.g., [1, 2]), If the boundary is None, skip that condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.common.is_in_range.params.val"></span><strong>val</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.is_in_range.params.val">¶</a> – value to be judged.</p></li>
<li><p><span class="target" id="egrecho.utils.common.is_in_range.params.max_val"></span><strong>max_val</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.is_in_range.params.max_val">¶</a> (<em>Optional</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>optional</em>) – Defaults to None.</p></li>
<li><p><span class="target" id="egrecho.utils.common.is_in_range.params.min_val"></span><strong>min_val</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.is_in_range.params.min_val">¶</a> (<em>Optional</em><em>[</em><em>Any</em><em>]</em><em>, </em><em>optional</em>) – Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.common.ObjectDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">ObjectDict</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L59-L87"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.ObjectDict" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>Makes a dictionary behave like an object, with attribute-style access.</p>
<p>Here are some examples of how it can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">ObjectDict</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>
<span class="c1"># or like this:</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">ObjectDict</span><span class="p">(</span><span class="n">samples</span><span class="o">=</span><span class="n">samples</span><span class="p">,</span> <span class="n">sample_rate</span><span class="o">=</span><span class="n">sample_rate</span><span class="p">)</span>
<span class="c1"># Attribute-style access</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">samples</span>
<span class="c1"># Dict-style access</span>
<span class="n">samples</span> <span class="o">=</span> <span class="n">o</span><span class="p">[</span><span class="s2">&quot;samples&quot;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.common.DataclassSerialMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">DataclassSerialMixin</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L102-L189"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.DataclassSerialMixin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>From/to dict mixin of dataclass.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Config</span><span class="p">(</span><span class="n">DataclassSerialMixin</span><span class="p">):</span>
<span class="gp">... </span>  <span class="n">a</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">123</span>
<span class="gp">... </span>  <span class="n">b</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;456&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="n">filt_type</span><span class="o">=</span><span class="s1">&#39;orig&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span>
<span class="go">Config(a=123, b=&#39;456&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<span class="go">{&#39;a&#39;: 123, &#39;b&#39;: &#39;456&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_</span> <span class="o">=</span> <span class="n">Config</span><span class="o">.</span><span class="n">from_dict</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="mi">456</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_</span>
<span class="go">Config(a=123, b=&#39;456&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">config</span> <span class="o">==</span> <span class="n">config_</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.common.DataclassSerialMixin.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_factory=&lt;class</span> <span class="pre">'dict'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt_type='default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_field_only=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_dc_types=False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L153-L169"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.DataclassSerialMixin.to_dict" title="Permalink to this definition"></a></dt>
<dd><p>Serializes this dataclass to a dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.common.DataclassSerialMixin.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_extra_fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L171-L189"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.DataclassSerialMixin.from_dict" title="Permalink to this definition"></a></dt>
<dd><p>Parses an instance of <code class="docutils literal notranslate"><span class="pre">cls</span></code> from the given dict.</p>
<p>NOTE: If the <code class="docutils literal notranslate"><span class="pre">decode_into_subclasses</span></code> class attribute is set to True (or
if <code class="docutils literal notranslate"><span class="pre">decode_into_subclasses=True</span></code> was passed in the class definition),
then if there are keys in the dict that aren’t fields of the dataclass,
this will decode the dict into an instance the first subclass of <cite>cls</cite>
which has all required field names present in the dictionary.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Passing <code class="docutils literal notranslate"><span class="pre">drop_extra_fields=None</span></code> (default) will use the class attribute</dt><dd><p>described above.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Passing <code class="docutils literal notranslate"><span class="pre">drop_extra_fields=True</span></code> will decode the dict into an instance</dt><dd><p>of <code class="docutils literal notranslate"><span class="pre">cls</span></code> and drop the extra keys in the dict.
Passing <code class="docutils literal notranslate"><span class="pre">drop_extra_fields=False</span></code> forces the above-mentioned behaviour.</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.fields_init_var">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">fields_init_var</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">class_or_instance</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L192-L210"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.fields_init_var" title="Permalink to this definition"></a></dt>
<dd><p>Return a tuple describing the <code class="docutils literal notranslate"><span class="pre">InitVar</span></code> fields of this dataclass.</p>
<p>Modified from:
<a class="reference external" href="https://docs.python.org/3/library/dataclasses.html#dataclasses.fields">https://docs.python.org/3/library/dataclasses.html#dataclasses.fields</a></p>
<p>Accepts a dataclass or an instance of one. Tuple elements are of
type Field.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.batched">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">batched</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L223-L230"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.batched" title="Permalink to this definition"></a></dt>
<dd><p>Batch data into tuples of length n. The last batch may be shorter.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.camelcase_to_snakecase">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">camelcase_to_snakecase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L240-L244"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.camelcase_to_snakecase" title="Permalink to this definition"></a></dt>
<dd><p>Convert camel-case string to snake-case.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.snakecase_to_camelcase">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">snakecase_to_camelcase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L247-L251"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.snakecase_to_camelcase" title="Permalink to this definition"></a></dt>
<dd><p>Convert snake-case string to camel-case string.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.get_diff_dict">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">get_diff_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">curr_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_dict</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L254-L277"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.get_diff_dict" title="Permalink to this definition"></a></dt>
<dd><p>Compare two dictionaries and return a new dictionary containing the differing key-value pairs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.common.get_diff_dict.params.curr_dict"></span><strong>curr_dict</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.get_diff_dict.params.curr_dict">¶</a> (<em>Dict</em>) – The current dictionary to compare.</p></li>
<li><p><span class="target" id="egrecho.utils.common.get_diff_dict.params.src_dict"></span><strong>src_dict</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.get_diff_dict.params.src_dict">¶</a> (<em>Dict</em>) – The source dictionary to compare against.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary containing the key-value pairs that differ between <code class="docutils literal notranslate"><span class="pre">src_dict</span></code> and <code class="docutils literal notranslate"><span class="pre">curr_dict</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">src_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">curr_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span> <span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;New York&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diff_dict</span> <span class="o">=</span> <span class="n">get_diff_dict</span><span class="p">(</span><span class="n">curr_dict</span><span class="p">,</span> <span class="n">src_dict</span><span class="p">)</span>
<span class="go">{&#39;age&#39;: 35, &#39;city&#39;: &#39;New York&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.del_default_dict">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">del_default_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L280-L310"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.del_default_dict" title="Permalink to this definition"></a></dt>
<dd><p>Removes key-value pairs from a dictionary that match default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.common.del_default_dict.params.data"></span><strong>data</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.del_default_dict.params.data">¶</a> (<em>Dict</em>) – The dictionary to remove default values from.</p></li>
<li><p><span class="target" id="egrecho.utils.common.del_default_dict.params.defaults"></span><strong>defaults</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.del_default_dict.params.defaults">¶</a> (<em>Dict</em>) – The dictionary containing default values to compare against.</p></li>
<li><p><span class="target" id="egrecho.utils.common.del_default_dict.params.recurse"></span><strong>recurse</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.del_default_dict.params.recurse">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – recursively processes. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary with default values removed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;New York&quot;</span><span class="p">,</span> <span class="s2">&quot;zip&quot;</span><span class="p">:</span> <span class="mi">10001</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;zip&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cleaned_data</span> <span class="o">=</span> <span class="n">del_default_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">defaults</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cleaned_data</span>
<span class="go">{&#39;address&#39;: {&#39;city&#39;: &#39;New York&#39;, &#39;zip&#39;: 10001}}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function modifies the <cite>data</cite> dictionary in place and also returns it. If
<code class="docutils literal notranslate"><span class="pre">recurse=True</span></code> it recursively processes nested dictionaries.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.dict_union">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">dict_union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*dicts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_keys=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict_factory=&lt;class</span> <span class="pre">'dict'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L313-L375"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.dict_union" title="Permalink to this definition"></a></dt>
<dd><p>Combine multiple dictionaries into the first one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.common.dict_union.params.*dicts"></span><strong>*dicts</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.dict_union.params.*dicts">¶</a> (<em>dict</em>) – One or more dictionaries to combine.</p></li>
<li><p><span class="target" id="egrecho.utils.common.dict_union.params.recurse"></span><strong>recurse</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.dict_union.params.recurse">¶</a> (<em>bool</em><em>, </em><em>optional</em>) – If True, also recursively combine nested dictionaries.</p></li>
<li><p><span class="target" id="egrecho.utils.common.dict_union.params.sort_keys"></span><strong>sort_keys</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.dict_union.params.sort_keys">¶</a> (<em>bool</em><em>, </em><em>optional</em>) – If True, sort the keys alphabetically in the resulting dictionary.</p></li>
<li><p><span class="target" id="egrecho.utils.common.dict_union.params.dict_factory"></span><strong>dict_factory</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.common.dict_union.params.dict_factory">¶</a> (<em>callable</em><em>, </em><em>optional</em>) – A callable that creates the output dictionary (default is <cite>dict</cite>).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A new dictionary containing the union of all input dictionaries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_union</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">dict_factory</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">)</span>
<span class="go">OrderedDict([(&#39;a&#39;, 1), (&#39;b&#39;, 2), (&#39;c&#39;, 5), (&#39;d&#39;, 6), (&#39;e&#39;, 7)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dict_union</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">dict_factory</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">)</span>
<span class="go">OrderedDict([(&#39;a&#39;, 2), (&#39;b&#39;, OrderedDict([(&#39;c&#39;, 3), (&#39;d&#39;, 3), (&#39;e&#39;, 6)]))])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.common.list2tuple">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.common.</span></span><span class="sig-name descname"><span class="pre">list2tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/common.py#L378-L416"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.common.list2tuple" title="Permalink to this definition"></a></dt>
<dd><p>Transfer the list in input parameter to hashable tuple, it is useful for <code class="docutils literal notranslate"><span class="pre">lru_cache</span></code>.</p>
<p>NOTE: Don’t support nest structure.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_input</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@list2tuple</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">get_input_wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arg_input</span> <span class="o">=</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kwargs_input</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;go&quot;</span><span class="p">,</span> <span class="s2">&quot;leave&quot;</span><span class="p">,</span> <span class="s2">&quot;break&quot;</span><span class="p">],</span> <span class="s1">&#39;action1&#39;</span><span class="p">:[</span><span class="s1">&#39;buy&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;sell&#39;</span><span class="p">,</span> <span class="s1">&#39;argue&#39;</span><span class="p">]]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_input</span><span class="p">(</span><span class="o">*</span><span class="n">arg_input</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_input</span><span class="p">)</span>
<span class="go">(([1, 2, 3], &#39;foo&#39;),</span>
<span class="go">{&#39;bar&#39;: True,</span>
<span class="go">&#39;action&#39;: [&#39;go&#39;, &#39;leave&#39;, &#39;break&#39;],</span>
<span class="go">&#39;action1&#39;: [&#39;buy&#39;, [&#39;sell&#39;, &#39;argue&#39;]]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_input_wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">arg_input</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs_input</span><span class="p">)</span>
<span class="go">(((1, 2, 3), &#39;foo&#39;),</span>
<span class="go">{&#39;bar&#39;: True,</span>
<span class="go">&#39;action&#39;: (&#39;go&#39;, &#39;leave&#39;, &#39;break&#39;),</span>
<span class="go">&#39;action1&#39;: (&#39;buy&#39;, [&#39;sell&#39;, &#39;argue&#39;])})</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-egrecho.utils.constants">
<span id="egrecho-utils-constants"></span><h1>egrecho.utils.constants<a class="headerlink" href="#module-egrecho.utils.constants" title="Permalink to this heading"></a></h1>
</section>
<section id="module-egrecho.utils.cuda_utils">
<span id="egrecho-utils-cuda-utils"></span><h1>egrecho.utils.cuda_utils<a class="headerlink" href="#module-egrecho.utils.cuda_utils" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.set_to_cuda">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">set_to_cuda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modules</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L26-L41"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.set_to_cuda" title="Permalink to this definition"></a></dt>
<dd><p>Send modules to gpu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.cuda_utils.set_to_cuda.params.modules"></span><strong>modules</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.set_to_cuda.params.modules">¶</a> – nn.module or a list of module</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.get_current_device">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">get_current_device</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L44-L52"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.get_current_device" title="Permalink to this definition"></a></dt>
<dd><p>Returns currently selected device (gpu/cpu).
If cuda available, return gpu, otherwise return cpu.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">device</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.to_device">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">to_device</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_object</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L85-L131"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.to_device" title="Permalink to this definition"></a></dt>
<dd><p>Move a tensor or collection of tensors to a specified device by inferring the device from another object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.cuda_utils.to_device.params.data"></span><strong>data</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.to_device.params.data">¶</a> (<em>Any</em>) – A tensor, collection of tensors, or anything with a <code class="docutils literal notranslate"><span class="pre">.to(...)</span></code> method.</p></li>
<li><p><span class="target" id="egrecho.utils.cuda_utils.to_device.params.device_object"></span><strong>device_object</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.to_device.params.device_object">¶</a> (<em>Union</em><em>[</em><em>torch.device</em><em>, </em><em>str</em><em>, </em><em>int</em><em>, </em><em>torch.Tensor</em><em>, </em><em>torch.nn.Module</em><em>]</em><em>, </em><em>optional</em>) – <p>The target device. Can be one of the following:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">torch.device</span></code>, <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, The target device.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">torch.nn.Module</span></code>: Infer the device from a module.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">torch.Tensor</span></code>: Infer the device from a tensor.
(default: the current defualt cuda device.)</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The same collection with all contained tensors residing on the target device.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.parse_gpus">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">parse_gpus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gpus</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L134-L161"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.parse_gpus" title="Permalink to this definition"></a></dt>
<dd><p>Parse gpus option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.cuda_utils.parse_gpus.params.gpus"></span><strong>gpus</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.parse_gpus.params.gpus">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]</span>) – <p>GPUs used for training on this machine.</p>
<p>-1: all;
N: [0,N);
“1,2”: comma-seperated; “0” means invalid while “0,” specify 1 gpu with id:1.</p>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.parse_gpus_opt">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">parse_gpus_opt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gpus</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L164-L199"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.parse_gpus_opt" title="Permalink to this definition"></a></dt>
<dd><p>Similar to <cite>parse_gpus</cite> but combines auto choose a single GPU.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.cuda_utils.parse_gpus_opt.params.gpus"></span><strong>gpus</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.parse_gpus_opt.params.gpus">¶</a> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em>) – <p>What GPUs should be used:</p>
<ul class="simple">
<li><p>case 0: comma-separated list, e.g., “1,” or “0,1” means specified id(s).</p></li>
<li><p>case 1: a single int (str) negative number (-1) means all visible devices <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">N-1]</span></code>.</p></li>
<li><p>case 2: ‘’ or None or 0 returns None means no GPU.</p></li>
<li><p>case 3: a single int (str) number equals 1 means auto choose a spare GPU.</p></li>
<li><p>case 4: a single int (str) number n greater than 1 returns <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">n-1]</span></code>.</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of GPU IDs or None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.synchronize">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">synchronize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L252-L257"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.synchronize" title="Permalink to this definition"></a></dt>
<dd><p>Similar to cuda.synchronize().
Waits for all kernels in all streams on a CUDA device to complete.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.peak_cuda_memory">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">peak_cuda_memory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L260-L274"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.peak_cuda_memory" title="Permalink to this definition"></a></dt>
<dd><p>Return the peak gpu memory statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the allocated CUDA memory
max_cached (float): the cached CUDA memory</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>max_alloc (float)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.release_memory">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">release_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">objects</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L278-L311"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.release_memory" title="Permalink to this definition"></a></dt>
<dd><p>Triggers garbage collection and Releases cuda cache memory.</p>
<p>This function sets the inputs to <cite>None</cite>, triggers garbage collection to release
CPU memory references, and attempts to clear GPU memory cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.cuda_utils.release_memory.params.*objects"></span><strong>*objects</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.release_memory.params.*objects">¶</a> – Variable number of objects to release.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of <cite>None</cite> values, with the same length as the input objects.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[None]</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">torch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">cuda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">cuda</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">release_memory</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="go">```</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.AutoGPUMode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">AutoGPUMode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L314-L317"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.AutoGPUMode" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>An enumeration.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.GPUManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">GPUManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addtional_qargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">AutoGPUMode.MAX_MEM</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L320-L509"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.GPUManager" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class enables the automated selection of the most available GPU or another based on specified mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.cuda_utils.GPUManager.params.addtional_qargs"></span><strong>addtional_qargs</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.GPUManager.params.addtional_qargs">¶</a> (<em>Optional</em>) – Additional arguments passed to <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code>.</p></li>
<li><p><span class="target" id="egrecho.utils.cuda_utils.GPUManager.params.mode"></span><strong>mode</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.GPUManager.params.mode">¶</a> (<a class="reference internal" href="#egrecho.utils.cuda_utils.AutoGPUMode" title="egrecho.utils.cuda_utils.AutoGPUMode"><em>AutoGPUMode</em></a>) – mode for GPU selection.
Defaults to MAX_MEM (max-free) memory.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">torch</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;CUDA_VISIBLE_DEVICES&quot;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;1,2&quot;</span>
<span class="n">gm</span> <span class="o">=</span> <span class="n">GPUManager</span><span class="p">()</span>
<span class="n">torch_device</span> <span class="o">=</span> <span class="n">gm</span><span class="o">.</span><span class="n">auto_choice</span><span class="p">()</span>

<span class="ow">or</span>

<span class="n">torch_device</span> <span class="o">=</span> <span class="n">GPUManager</span><span class="o">.</span><span class="n">detect</span><span class="p">()</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">torch_device</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.GPUManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addtional_qargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">AutoGPUMode.MAX_MEM</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L344-L368"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.GPUManager.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.GPUManager.new_query">
<span class="sig-name descname"><span class="pre">new_query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L397-L418"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.GPUManager.new_query" title="Permalink to this definition"></a></dt>
<dd><p>Running the <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> command and organizing the results as a list of dictionaries
containing information searched from <cite>nvidia-smi</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.GPUManager.detect">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">detect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">AutoGPUMode.MAX_MEM</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L425-L429"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.GPUManager.detect" title="Permalink to this definition"></a></dt>
<dd><p>A classmethod calls :meth`auto_choice` method to select a GPU and returns dveice id.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.GPUManager.auto_choice">
<span class="sig-name descname"><span class="pre">auto_choice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L431-L474"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.GPUManager.auto_choice" title="Permalink to this definition"></a></dt>
<dd><p>Auto choice a GPU ID based on specified mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.cuda_utils.GPUManager.auto_choice.params.mode"></span><strong>mode</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.cuda_utils.GPUManager.auto_choice.params.mode">¶</a> (<em>str</em>) – The mode for selecting the GPU.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>device id.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.device2gpu_id">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">device2gpu_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_id</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L512-L517"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.device2gpu_id" title="Permalink to this definition"></a></dt>
<dd><p>Given the device index and get the unmasked real GPU ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.num_gpus">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">num_gpus</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.cuda_utils.num_gpus" title="Permalink to this definition"></a></dt>
<dd><p>Get visible gpu number.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.is_cuda_available">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">is_cuda_available</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L531-L540"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.is_cuda_available" title="Permalink to this definition"></a></dt>
<dd><p>check cuda and leave cuda uninitialized.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.patch_nvml_check_env">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">patch_nvml_check_env</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/../../../../../../opt/hostedtoolcache/Python/3.8.18/x64/lib/python3.8/contextlib.py#L543-L553"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.patch_nvml_check_env" title="Permalink to this definition"></a></dt>
<dd><p>A context manager that patch <code class="docutils literal notranslate"><span class="pre">PYTORCH_NVML_BASED_CUDA_CHECK=1</span></code>, and restore finally.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.cuda_utils.NVMLDeviceCount">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.cuda_utils.</span></span><span class="sig-name descname"><span class="pre">NVMLDeviceCount</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/cuda_utils.py#L556-L729"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.cuda_utils.NVMLDeviceCount" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A tool for nvml-based cuda check for torch &lt; 2.0 which won’t trigger the drivers and leave cuda
uninitialized.</p>
<dl class="simple">
<dt>Coppied from pytorch, see:</dt><dd><p><a class="reference external" href="https://github.com/pytorch/pytorch/pull/84879">https://github.com/pytorch/pytorch/pull/84879</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-egrecho.utils.data_utils">
<span id="egrecho-utils-data-utils"></span><h1>egrecho.utils.data_utils<a class="headerlink" href="#module-egrecho.utils.data_utils" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.split_sequence">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">split_sequence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'batch'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_last</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L36-L100"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.split_sequence" title="Permalink to this definition"></a></dt>
<dd><p>Split a sequence into <code class="docutils literal notranslate"><span class="pre">num_splits</span></code> equal parts. The element order can be randomized.
Raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">split_num</span></code> is larger than <code class="docutils literal notranslate"><span class="pre">len(seq)</span></code>.
Support mode of ‘shard’ or ‘batch’. If ‘batch’, the splits lists as original sequence
else shard the original sequence, e.g., for spliting <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1</span> <span class="pre">,</span> <span class="pre">2,</span> <span class="pre">3]</span></code> to 2 parts,
shard mode result: <code class="docutils literal notranslate"><span class="pre">[[0,</span> <span class="pre">2],</span> <span class="pre">[1,</span> <span class="pre">3]]</span></code> while batch mode reult: <code class="docutils literal notranslate"><span class="pre">[[0,</span> <span class="pre">1],</span> <span class="pre">[2,</span> <span class="pre">3]]</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.data_utils.split_sequence.params.seq"></span><strong>seq</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.split_sequence.params.seq">¶</a> (<em>Sequence</em>) – Input iterable.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.split_sequence.params.num_splits"></span><strong>num_splits</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.split_sequence.params.num_splits">¶</a> (<em>int</em>) – Split num.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.split_sequence.params.mode"></span><strong>mode</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.split_sequence.params.mode">¶</a> (<em>str</em>) – (‘shard’, ‘batch’)</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.split_sequence.params.shuffle"></span><strong>shuffle</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.split_sequence.params.shuffle">¶</a> (<em>bool</em>) – If true, shuffle input sequence before split it.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.split_sequence.params.drop_last"></span><strong>drop_last</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.split_sequence.params.drop_last">¶</a> (<em>bool</em>) – If true, drop last items when <code class="docutils literal notranslate"><span class="pre">len(seq)</span></code> is not divisible by <code class="docutils literal notranslate"><span class="pre">num_splits</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of smaller squences.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.Dillable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">Dillable</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L103-L120"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.Dillable" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Mix-in that will leverage <code class="docutils literal notranslate"><span class="pre">dill</span></code> instead of <code class="docutils literal notranslate"><span class="pre">pickle</span></code>
when pickling an object.</p>
<p>It is useful when the user can’t avoid <code class="docutils literal notranslate"><span class="pre">pickle</span></code> (e.g. in multiprocessing),
but needs to use unpicklable objects such as lambdas.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.iflatmap_unordered">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">iflatmap_unordered</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_iter</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L129-L164"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.iflatmap_unordered" title="Permalink to this definition"></a></dt>
<dd><p>Parrallized mapping operation.</p>
<p>Note: Data are in kwargs_iter, and flats reults of all jobs to a queue.
This operation don’t keep the original order in async way.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.data_utils.iflatmap_unordered.params.nj"></span><strong>nj</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.iflatmap_unordered.params.nj">¶</a> (<em>int</em>) – num of jobs.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.iflatmap_unordered.params.fn"></span><strong>fn</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.iflatmap_unordered.params.fn">¶</a> (<em>Callable</em>) – a function can yied results from given args.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.iflatmap_unordered.params.kwargs_iter"></span><strong>kwargs_iter</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.iflatmap_unordered.params.kwargs_iter">¶</a> (<em>Iterable</em><em>[</em><em>dict</em><em>]</em>) – kwargs map to <code class="docutils literal notranslate"><span class="pre">fn</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.buffer_shuffle">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">buffer_shuffle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L176-L212"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.buffer_shuffle" title="Permalink to this definition"></a></dt>
<dd><p>Buffer shuffle the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.data_utils.buffer_shuffle.params.data"></span><strong>data</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.buffer_shuffle.params.data">¶</a> (<em>Iterable</em>) – data source.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.buffer_shuffle.params.buffer_size"></span><strong>buffer_size</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.buffer_shuffle.params.buffer_size">¶</a> (<em>int</em>) – defaults to 10000.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.buffer_shuffle.params.rng"></span><strong>rng</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.buffer_shuffle.params.rng">¶</a> (<em>np.random.Generator</em>) – fix random.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Generator yields data item.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ichunk_size">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">ichunk_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total_len</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">even</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L215-L281"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.ichunk_size" title="Permalink to this definition"></a></dt>
<dd><p>Infer an enven split chunksize generator before applying split operation if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.data_utils.ichunk_size.params.total_len"></span><strong>total_len</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.ichunk_size.params.total_len">¶</a> (<em>int</em>) – The lengths to be divided.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.ichunk_size.params.chunk_size"></span><strong>chunk_size</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.ichunk_size.params.chunk_size">¶</a> (<em>int</em>) – </p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.ichunk_size.params.split_num"></span><strong>split_num</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.ichunk_size.params.split_num">¶</a> (<em>int</em>) – Number of splits, can be provided to infer chunksizes.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.ichunk_size.params.even"></span><strong>even</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.ichunk_size.params.even">¶</a> (<em>bool</em>) – If True, the max differ between chunksize is 1.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A generator yields sizes of total length.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ichunk_size</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">even</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>  <span class="c1"># chunk_size=10, total_len=15, adapt (10, 5) -&gt; (8, 7).</span>
<span class="go">[8, 7]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ichunk_size</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">split_num</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">even</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>  <span class="c1"># split_num=4, total_len=10, adapt chunksize (3, 3, 3, 1) -&gt; (3, 3, 2, 2).</span>
<span class="go">[3, 3, 2, 2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ilen">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">ilen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">iterable</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L284-L296"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.ilen" title="Permalink to this definition"></a></dt>
<dd><p>Return the number of items in iterable inputs.</p>
<p>This consumes the iterable data, so handle with care.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ilen</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">333334</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.zip_dict">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">zip_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">dicts</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L307-L313"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.zip_dict" title="Permalink to this definition"></a></dt>
<dd><p>Iterate over items of dictionaries grouped by their keys.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ClassLabel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">ClassLabel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_classes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L317-L560"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.ClassLabel" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.DictFileMixin" title="egrecho.utils.io.utils.DictFileMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictFileMixin</span></code></a></p>
<p>The instance of this class stores the string names of labels,
can be used for mapping str2label or label2str.</p>
<p>Modified from <a class="reference external" href="https://github.com/huggingface/datasets/blob/main/src/datasets/features/features.py#ClassLabel">HuggingFace Datasets</a>.</p>
<dl class="simple">
<dt>There are 3 ways to define a <code class="docutils literal notranslate"><span class="pre">ClassLabel</span></code>, which correspond to the 3 arguments:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">num_classes</span></code>: Create 0 to (num_classes-1) labels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">names</span></code>: List of label strings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">names_file</span></code>: File (Text) containing the list of labels.</p></li>
</ul>
</dd>
</dl>
<p>Under the hood the labels are stored as integers.
You can use negative integers to represent unknown/missing labels.</p>
<p>Serialize/deserialize of yaml files will be in a more readable way (<code class="docutils literal notranslate"><span class="pre">from_yaml</span></code>, ‘<cite>to_yaml`</cite>):</p>
<blockquote>
<div><p>names:                  -&gt;                names:</p>
<ul class="simple">
<li><p>negative              -&gt;                  ‘0’: negative</p></li>
<li><p>positive              -&gt;                  ‘1’: positive</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.data_utils.ClassLabel.params.num_classes"></span><strong>num_classes</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.ClassLabel.params.num_classes">¶</a> (<cite>int</cite>, <em>optional</em>) – Number of classes. All labels must be <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">num_classes</span></code>.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.ClassLabel.params.names"></span><strong>names</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.ClassLabel.params.names">¶</a> (<cite>list</cite> of <cite>str</cite>, <em>optional</em>) – String names for the integer classes.
The order in which the names are provided is kept.</p></li>
<li><p><span class="target" id="egrecho.utils.data_utils.ClassLabel.params.names_file"></span><strong>names_file</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.data_utils.ClassLabel.params.names_file">¶</a> (<cite>str</cite>, <em>optional</em>) – Path to a file with names for the integer classes, one per line.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">label</span> <span class="o">=</span> <span class="n">ClassLabel</span><span class="p">(</span><span class="n">num_classes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;speaker1&#39;</span><span class="p">,</span> <span class="s1">&#39;speaker2&#39;</span><span class="p">,</span> <span class="s1">&#39;speaker3&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label</span>
<span class="go">ClassLabel(num_classes=3, names=[&#39;speaker1&#39;, &#39;speaker2&#39;, &#39;speaker3&#39;], id=None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label</span><span class="o">.</span><span class="n">encode_label</span><span class="p">(</span><span class="s1">&#39;speaker1&#39;</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label</span><span class="o">.</span><span class="n">encode_label</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label</span><span class="o">.</span><span class="n">encode_label</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ClassLabel.str2int">
<span class="sig-name descname"><span class="pre">str2int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L424-L445"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.ClassLabel.str2int" title="Permalink to this definition"></a></dt>
<dd><p>Conversion class name <code class="docutils literal notranslate"><span class="pre">string</span></code> =&gt; <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>]</span></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">label</span> <span class="o">=</span> <span class="n">ClassLabel</span><span class="p">(</span><span class="n">num_classes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;speaker1&#39;</span><span class="p">,</span> <span class="s1">&#39;speaker2&#39;</span><span class="p">,</span> <span class="s1">&#39;speaker3&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label</span><span class="o">.</span><span class="n">str2int</span><span class="p">(</span><span class="s1">&#39;speaker1&#39;</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ClassLabel.int2str">
<span class="sig-name descname"><span class="pre">int2str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L468-L495"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.ClassLabel.int2str" title="Permalink to this definition"></a></dt>
<dd><p>Conversion <code class="docutils literal notranslate"><span class="pre">integer</span></code> =&gt; class name <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<p>Regarding unknown/missing labels: passing negative integers raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code>]</span></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">label</span> <span class="o">=</span> <span class="n">ClassLabel</span><span class="p">(</span><span class="n">num_classes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;speaker1&#39;</span><span class="p">,</span> <span class="s1">&#39;speaker2&#39;</span><span class="p">,</span> <span class="s1">&#39;speaker3&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">label</span><span class="o">.</span><span class="n">int2str</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;speaker1&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ClassLabel.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L512-L536"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.ClassLabel.from_dict" title="Permalink to this definition"></a></dt>
<dd><p>Deserialize from dict.</p>
<p>transform dict to list:</p>
<blockquote>
<div><p>names:                -&gt;                  names:</p>
<p>‘0’: negative         -&gt;                  - negative</p>
<p>‘1’: positive         -&gt;                  - positive</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ClassLabel.to_file">
<span class="sig-name descname"><span class="pre">to_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L538-L551"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.ClassLabel.to_file" title="Permalink to this definition"></a></dt>
<dd><p>Serialize to a dict file.</p>
<p>names:                  -&gt;                names:</p>
<ul class="simple">
<li><p>negative              -&gt;                  ‘0’: negative</p></li>
<li><p>positive              -&gt;                  ‘1’: positive</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.ClassLabel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_classes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.data_utils.ClassLabel.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.SplitInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">SplitInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patterns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_examples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L564-L576"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.SplitInfo" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A container of split dataset info.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.SplitInfo.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patterns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_examples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">meta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.data_utils.SplitInfo.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.SplitInfoDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">SplitInfoDict</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L579-L615"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.SplitInfoDict" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <a class="reference internal" href="egrecho.utils.io.html#egrecho.utils.io.utils.DictFileMixin" title="egrecho.utils.io.utils.DictFileMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">DictFileMixin</span></code></a></p>
<dl class="py property">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.SplitInfoDict.total_num_examples">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_num_examples</span></span><a class="headerlink" href="#egrecho.utils.data_utils.SplitInfoDict.total_num_examples" title="Permalink to this definition"></a></dt>
<dd><p>Return the total number of examples.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.try_length">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">try_length</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L625-L632"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.try_length" title="Permalink to this definition"></a></dt>
<dd><p>Try to get the length of an object, fallback to return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.data_utils.wavscp2dicts">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.data_utils.</span></span><span class="sig-name descname"><span class="pre">wavscp2dicts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wav_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_utt_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col_path_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'audio_path'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/data_utils.py#L635-L650"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.data_utils.wavscp2dicts" title="Permalink to this definition"></a></dt>
<dd><p>Read wav.scp to a list of dict</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]</span></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-egrecho.utils.dist">
<span id="egrecho-utils-dist"></span><h1>egrecho.utils.dist<a class="headerlink" href="#module-egrecho.utils.dist" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.dist.send_exit_ddp">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.dist.</span></span><span class="sig-name descname"><span class="pre">send_exit_ddp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stop_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L35-L46"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.send_exit_ddp" title="Permalink to this definition"></a></dt>
<dd><p>reduce stop signal across ddp progresses, controled by main rank.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.dist.get_free_port">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.dist.</span></span><span class="sig-name descname"><span class="pre">get_free_port</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L57-L69"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.get_free_port" title="Permalink to this definition"></a></dt>
<dd><p>Select a free port for localhost.</p>
<p>Useful in single-node training when we don’t want to connect to a real main node but have to set the
<code class="docutils literal notranslate"><span class="pre">MASTER_PORT</span></code> environment variable.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.dist.is_port_in_use">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.dist.</span></span><span class="sig-name descname"><span class="pre">is_port_in_use</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L72-L80"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.is_port_in_use" title="Permalink to this definition"></a></dt>
<dd><p>Checks if a port is in use on <cite>localhost</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.dist.DistInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.dist.</span></span><span class="sig-name descname"><span class="pre">DistInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">world_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L84-L116"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.DistInfo" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains the environment for the current dist rank.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.DistInfo.detect">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">detect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L92-L116"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.DistInfo.detect" title="Permalink to this definition"></a></dt>
<dd><p>Tries to automatically detect the pytorch distributed environment paramters.
:rtype: <span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#egrecho.utils.dist.DistInfo" title="egrecho.utils.dist.DistInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">DistInfo</span></code></a></span></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">allow_env</span> <span class="pre">=</span> <span class="pre">True</span></code>, some other dist environment may be detected.
This detection may not work in processes spawned from the distributed processes (e.g. DataLoader workers)
as the distributed framework won’t be initialized there.
It will default to 1 distributed process in this case.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.DistInfo.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">world_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.dist.DistInfo.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.dist.WorkerInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.dist.</span></span><span class="sig-name descname"><span class="pre">WorkerInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_workers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L120-L146"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.WorkerInfo" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Contains the environment for the current dataloader within the current training process.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.WorkerInfo.detect">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">detect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allow_env</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L128-L146"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.WorkerInfo.detect" title="Permalink to this definition"></a></dt>
<dd><p>Automatically detects the number of pytorch workers and the current rank.
:rtype: <span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#egrecho.utils.dist.WorkerInfo" title="egrecho.utils.dist.WorkerInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">WorkerInfo</span></code></a></span></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">allow_env</span> <span class="pre">=</span> <span class="pre">True</span></code>, some other worker environment may be detected.
This only works reliably within a dataloader worker as otherwise the necessary information won’t be present.
In such a case it will default to 1 worker</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.WorkerInfo.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_workers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.dist.WorkerInfo.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.dist.EnvInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.dist.</span></span><span class="sig-name descname"><span class="pre">EnvInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L150-L211"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.EnvInfo" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Container of DistInfo and WorkerInfo.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.EnvInfo.from_args">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">world_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_workers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_id</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L158-L181"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.EnvInfo.from_args" title="Permalink to this definition"></a></dt>
<dd><p>Set env info from args.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.dist.EnvInfo.from_args.params.world_size"></span><strong>world_size</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.EnvInfo.from_args.params.world_size">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span>) – The worldsize used for distributed training (equals total number of distributed processes)</p></li>
<li><p><span class="target" id="egrecho.utils.dist.EnvInfo.from_args.params.rank"></span><strong>rank</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.EnvInfo.from_args.params.rank">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span>) – The distributed global rank of the current process</p></li>
<li><p><span class="target" id="egrecho.utils.dist.EnvInfo.from_args.params.num_workers"></span><strong>num_workers</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.EnvInfo.from_args.params.num_workers">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span>) – The number of workers per distributed training process</p></li>
<li><p><span class="target" id="egrecho.utils.dist.EnvInfo.from_args.params.worker_id"></span><strong>worker_id</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.EnvInfo.from_args.params.worker_id">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span>) – The rank of the current worker within the number of workers of
the current training process</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#egrecho.utils.dist.EnvInfo" title="egrecho.utils.dist.EnvInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvInfo</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="egrecho.utils.dist.EnvInfo.num_shards">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_shards</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#egrecho.utils.dist.EnvInfo.num_shards" title="Permalink to this definition"></a></dt>
<dd><p>Returns the total number of shards.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This may not be accurate in a non-dataloader-worker process like the main training process
as it doesn’t necessarily know about the number of dataloader workers.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="egrecho.utils.dist.EnvInfo.shard_rank">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">shard_rank</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#egrecho.utils.dist.EnvInfo.shard_rank" title="Permalink to this definition"></a></dt>
<dd><p>Returns the rank of the current process wrt. the total number of shards.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This may not be accurate in a non-dataloader-worker process like the main training process as it
doesn’t necessarily know about the number of dataloader workers.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.EnvInfo.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_info</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.dist.EnvInfo.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.dist.TorchMPLauncher">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.dist.</span></span><span class="sig-name descname"><span class="pre">TorchMPLauncher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_processes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disable_mem_share</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'spawn'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L214-L360"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.TorchMPLauncher" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Launches processes that run a given function in parallel, and joins them all at the end.</p>
<p>Worker processes gives a rank to <code class="docutils literal notranslate"><span class="pre">os.envrion[&quot;LOCAL_RANK&quot;]</span></code> that ranges from 0 to N - 1.</p>
<p>Referring to <a class="reference external" href="https://github.com/Lightning-AI/lightning/blob/master/src/lightning/fabric/strategies/launchers/multiprocessing.py">lightning fabric</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This launcher requires all objects to be pickleable.</p></li>
<li><p>Entry point to the program/script should guarded by <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">&quot;__main__&quot;</span></code>.</p></li>
<li><p>In environments like Ipython notebooks where ‘spawn’ is not available, ‘fork’ works better.</p></li>
<li><p>Start method ‘fork’ the user must ensure that no CUDA context gets created in the main process before
the launcher is invoked, i.e., torch.cuda should be uninitialized.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.dist.TorchMPLauncher.params.num_processes"></span><strong>num_processes</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.TorchMPLauncher.params.num_processes">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span>) – number works.</p></li>
<li><p><span class="target" id="egrecho.utils.dist.TorchMPLauncher.params.port"></span><strong>port</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.TorchMPLauncher.params.port">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</span>) – master port, if not set, will auto find in localhost.</p></li>
<li><p><span class="target" id="egrecho.utils.dist.TorchMPLauncher.params.disable_mem_share"></span><strong>disable_mem_share</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.TorchMPLauncher.params.disable_mem_share">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – mem_share is the feature of torch.multiprocessing.
Required set True when running models on CPU, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">_disable_module_memory_sharing()</span></code>.</p></li>
<li><p><span class="target" id="egrecho.utils.dist.TorchMPLauncher.params.start_method"></span><strong>start_method</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.TorchMPLauncher.params.start_method">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code>[<code class="docutils literal notranslate"><span class="pre">'spawn'</span></code>, <code class="docutils literal notranslate"><span class="pre">'fork'</span></code>, <code class="docutils literal notranslate"><span class="pre">'forkserver'</span></code>]</span>) – The method how to start the processes.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">launcher</span> <span class="o">=</span> <span class="n">TorchMPLauncher</span><span class="p">(</span><span class="n">num_processes</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">launcher</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="n">my_function</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">kwarg1</span><span class="o">=</span><span class="n">value1</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.TorchMPLauncher.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_processes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disable_mem_share</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'spawn'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L242-L257"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.TorchMPLauncher.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.dist.TorchMPLauncher.launch">
<span class="sig-name descname"><span class="pre">launch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/dist.py#L259-L297"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.dist.TorchMPLauncher.launch" title="Permalink to this definition"></a></dt>
<dd><p>Launches processes that run the given function in parallel.</p>
<p>The function is allowed to have a return value. However, when all processes join, only the return value
of worker process 0 gets returned from this <cite>launch</cite> method in the main process.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.dist.TorchMPLauncher.launch.params.function"></span><strong>function</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.TorchMPLauncher.launch.params.function">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></span>) – The entry point for all launched processes.</p></li>
<li><p><span class="target" id="egrecho.utils.dist.TorchMPLauncher.launch.params.*args"></span><strong>*args</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.TorchMPLauncher.launch.params.*args">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span>) – Optional positional arguments to be passed to the given function.</p></li>
<li><p><span class="target" id="egrecho.utils.dist.TorchMPLauncher.launch.params.**kwargs"></span><strong>**kwargs</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.dist.TorchMPLauncher.launch.params.**kwargs">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span>) – Optional keyword arguments to be passed to the given function.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-egrecho.utils.imports">
<span id="egrecho-utils-imports"></span><h1>egrecho.utils.imports<a class="headerlink" href="#module-egrecho.utils.imports" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.imports.is_package_available">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.imports.</span></span><span class="sig-name descname"><span class="pre">is_package_available</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">modules</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/imports.py#L14-L22"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.imports.is_package_available" title="Permalink to this definition"></a></dt>
<dd><p>Returns if a top-level module with <code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code> exists <strong>without</strong>
importing it. This is generally safer than try-catch block around a
<code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">X</span></code>. It avoids third party libraries breaking assumptions of some of
our tests, e.g., setting multiprocessing start method when imported
(see librosa/#747, torchvision/#544).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.imports.is_module_available">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.imports.</span></span><span class="sig-name descname"><span class="pre">is_module_available</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.imports.is_module_available" title="Permalink to this definition"></a></dt>
<dd><p>Check if a module path is available in your environment.
This will try to import it.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_module_available</span><span class="p">(</span><span class="s1">&#39;torch&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_module_available</span><span class="p">(</span><span class="s1">&#39;fake&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_module_available</span><span class="p">(</span><span class="s1">&#39;torch.utils&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_module_available</span><span class="p">(</span><span class="s1">&#39;torch.util&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.imports.compare_version">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.imports.</span></span><span class="sig-name descname"><span class="pre">compare_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">package</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ver</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_base_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/imports.py#L50-L78"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.imports.compare_version" title="Permalink to this definition"></a></dt>
<dd><p>Compare package version with some requirements.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">compare_version</span><span class="p">(</span><span class="s2">&quot;torch&quot;</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ge</span><span class="p">,</span> <span class="s2">&quot;0.1&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compare_version</span><span class="p">(</span><span class="s2">&quot;does_not_exist&quot;</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ge</span><span class="p">,</span> <span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.imports.lazy_import">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.imports.</span></span><span class="sig-name descname"><span class="pre">lazy_import</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/imports.py#L193-L217"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.imports.lazy_import" title="Permalink to this definition"></a></dt>
<dd><p>Returns a proxy module object that will lazily import the given module the first time it is used.</p>
<p>Copied from <a class="reference external" href="https://github.com/Lightning-AI/utilities/blob/main/src/lightning_utilities/core/imports.py#lazy_import">lightning utilities</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.imports.lazy_import.params.module_name"></span><strong>module_name</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.imports.lazy_import.params.module_name">¶</a> – the fully-qualified module name to import</p></li>
<li><p><span class="target" id="egrecho.utils.imports.lazy_import.params.callback"></span><strong>callback</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.imports.lazy_import.params.callback">¶</a> (<em>None</em>) – a callback function to call before importing the
module</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a proxy module object that will be lazily imported when first used</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lazy version of `import tensorflow as tf`</span>
<span class="n">tf</span> <span class="o">=</span> <span class="n">lazy_import</span><span class="p">(</span><span class="s2">&quot;tensorflow&quot;</span><span class="p">)</span>

<span class="c1"># Other commands</span>

<span class="c1"># Now the module is loaded</span>
<span class="n">tf</span><span class="o">.</span><span class="n">__version__</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.imports.LazyModule">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.imports.</span></span><span class="sig-name descname"><span class="pre">LazyModule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/imports.py#L220-L258"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.imports.LazyModule" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">module</span></code></p>
<p>Proxy module that lazily imports the underlying module the first time it is actually used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.imports.LazyModule.params.module_name"></span><strong>module_name</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.imports.LazyModule.params.module_name">¶</a> – the fully-qualified module name to import</p></li>
<li><p><span class="target" id="egrecho.utils.imports.LazyModule.params.callback"></span><strong>callback</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.imports.LazyModule.params.callback">¶</a> (<em>None</em>) – a callback function to call before importing the
module</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.imports.LazyModule.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/imports.py#L230-L233"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.imports.LazyModule.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-egrecho.utils.logging">
<span id="egrecho-utils-logging"></span><h1>egrecho.utils.logging<a class="headerlink" href="#module-egrecho.utils.logging" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.logging.get_logger">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.logging.</span></span><span class="sig-name descname"><span class="pre">get_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'egrecho.utils.logging'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L16-L19"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.get_logger" title="Permalink to this definition"></a></dt>
<dd><p>Get logger singleton instance based on package name.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#egrecho.utils.logging.Logger" title="egrecho.utils.logging.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.logging.</span></span><span class="sig-name descname"><span class="pre">Logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L22-L184"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Sigleton pattern for logger.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.logging.Logger.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.params.name">¶</a> (<em>str</em>) – The name of the logger.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L41-L63"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L101-L110"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.info" title="Permalink to this definition"></a></dt>
<dd><p>Log an info message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.logging.Logger.info.params.message"></span><strong>message</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.info.params.message">¶</a> (<em>str</em>) – The message to be logged.</p></li>
<li><p><span class="target" id="egrecho.utils.logging.Logger.info.params.ranks"></span><strong>ranks</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.info.params.ranks">¶</a> (<em>List</em><em>[</em><em>int</em><em>]</em>) – List of parallel ranks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.info_once">
<span class="sig-name descname"><span class="pre">info_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L112-L123"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.info_once" title="Permalink to this definition"></a></dt>
<dd><p>Log a warning, but only once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.logging.Logger.info_once.params.message"></span><strong>message</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.info_once.params.message">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Message to display</p></li>
<li><p><span class="target" id="egrecho.utils.logging.Logger.info_once.params.ranks"></span><strong>ranks</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.info_once.params.ranks">¶</a> (<em>List</em><em>[</em><em>int</em><em>]</em>) – List of parallel ranks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.warning">
<span class="sig-name descname"><span class="pre">warning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L125-L136"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.warning" title="Permalink to this definition"></a></dt>
<dd><p>Log a warning message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.logging.Logger.warning.params.message"></span><strong>message</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.warning.params.message">¶</a> (<em>str</em>) – The message to be logged.</p></li>
<li><p><span class="target" id="egrecho.utils.logging.Logger.warning.params.ranks"></span><strong>ranks</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.warning.params.ranks">¶</a> (<em>List</em><em>[</em><em>int</em><em>]</em>) – List of parallel ranks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.warning_once">
<span class="sig-name descname"><span class="pre">warning_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L138-L149"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.warning_once" title="Permalink to this definition"></a></dt>
<dd><p>Log a warning, but only once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.logging.Logger.warning_once.params.message"></span><strong>message</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.warning_once.params.message">¶</a> (<em>str</em>) – The message to be logged.</p></li>
<li><p><span class="target" id="egrecho.utils.logging.Logger.warning_once.params.ranks"></span><strong>ranks</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.warning_once.params.ranks">¶</a> (<em>List</em><em>[</em><em>int</em><em>]</em>) – List of parallel ranks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.debug">
<span class="sig-name descname"><span class="pre">debug</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L151-L160"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.debug" title="Permalink to this definition"></a></dt>
<dd><p>Log a debug message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.logging.Logger.debug.params.message"></span><strong>message</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.debug.params.message">¶</a> (<em>str</em>) – The message to be logged.</p></li>
<li><p><span class="target" id="egrecho.utils.logging.Logger.debug.params.ranks"></span><strong>ranks</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.debug.params.ranks">¶</a> (<em>List</em><em>[</em><em>int</em><em>]</em>) – List of parallel ranks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.error">
<span class="sig-name descname"><span class="pre">error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L162-L171"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.error" title="Permalink to this definition"></a></dt>
<dd><p>Log an error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.logging.Logger.error.params.message"></span><strong>message</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.error.params.message">¶</a> (<em>str</em>) – The message to be logged.</p></li>
<li><p><span class="target" id="egrecho.utils.logging.Logger.error.params.ranks"></span><strong>ranks</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.error.params.ranks">¶</a> (<em>List</em><em>[</em><em>int</em><em>]</em>) – List of parallel ranks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.logging.Logger.error_once">
<span class="sig-name descname"><span class="pre">error_once</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ranks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/logging.py#L173-L184"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.logging.Logger.error_once" title="Permalink to this definition"></a></dt>
<dd><p>Log a error, but only once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.logging.Logger.error_once.params.message"></span><strong>message</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.error_once.params.message">¶</a> (<em>str</em>) – The message to be logged.</p></li>
<li><p><span class="target" id="egrecho.utils.logging.Logger.error_once.params.ranks"></span><strong>ranks</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.logging.Logger.error_once.params.ranks">¶</a> (<em>List</em><em>[</em><em>int</em><em>]</em>) – List of parallel ranks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-egrecho.utils.misc">
<span id="egrecho-utils-misc"></span><h1>egrecho.utils.misc<a class="headerlink" href="#module-egrecho.utils.misc" title="Permalink to this heading"></a></h1>
<dl class="py exception">
<dt class="sig sig-object py" id="egrecho.utils.misc.ConfigurationException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">ConfigurationException</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L18-L19"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.ConfigurationException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="egrecho.utils.misc.NoneDataException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">NoneDataException</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L22-L23"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.NoneDataException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.misc.parse_bytes">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">parse_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L71-L78"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.parse_bytes" title="Permalink to this definition"></a></dt>
<dd><p>parse <cite>size</cite> from bytes to the largest possible unit</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.misc.kill_name_proc">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">kill_name_proc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grep_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_kill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L97-L129"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.kill_name_proc" title="Permalink to this definition"></a></dt>
<dd><p>Kills processes based on a grep string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.misc.kill_name_proc.params.grep_str"></span><strong>grep_str</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.misc.kill_name_proc.params.grep_str">¶</a> (<em>str</em>) – The grep string to search for processes.</p></li>
<li><p><span class="target" id="egrecho.utils.misc.kill_name_proc.params.force_kill"></span><strong>force_kill</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.misc.kill_name_proc.params.force_kill">¶</a> (<em>bool</em>) – If True, uses <code class="docutils literal notranslate"><span class="pre">SIGKILL</span></code> (-9) to forcefully terminate processes.</p></li>
</ul>
</dd>
</dl>
<p>The function uses <code class="docutils literal notranslate"><span class="pre">ps</span> <span class="pre">aux</span> <span class="pre">|</span> <span class="pre">grep</span></code> to search for processes that match the given <code class="docutils literal notranslate"><span class="pre">grep_str</span></code>.
It then requests user confirmation to kill these processes.
If the user agrees, it terminates the processes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.misc.valid_import_clspath">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">valid_import_clspath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L173-L178"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.valid_import_clspath" title="Permalink to this definition"></a></dt>
<dd><p>Import path must be str with dot pattern (<code class="docutils literal notranslate"><span class="pre">'calendar.Calendar'</span></code>).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.misc.class2str">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">class2str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L181-L193"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.class2str" title="Permalink to this definition"></a></dt>
<dd><p>Extract path from class type.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">calendar</span> <span class="kn">import</span> <span class="n">Calendar</span>
<span class="k">assert</span> <span class="nb">str</span><span class="p">(</span><span class="n">Calendar</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;&lt;class &#39;calendar.Calendar&#39;&gt;&quot;</span>
<span class="k">assert</span> <span class="n">class2str</span><span class="p">(</span><span class="n">Calendar</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;calendar.Calendar&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.misc.get_import_path">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">get_import_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L197-L234"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.get_import_path" title="Permalink to this definition"></a></dt>
<dd><p>Returns the shortest dot import path for the given object.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.misc.locate_">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.misc.</span></span><span class="sig-name descname"><span class="pre">locate_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/misc.py#L245-L304"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.misc.locate_" title="Permalink to this definition"></a></dt>
<dd><p>COPIED FROM <a class="reference external" href="https://github.com/facebookresearch/hydra/blob/f8940600d0ab5c695961ad83abd042ffe9458caf/hydra/_internal/utils.py#L614">Hydra</a>.</p>
<p>Locate an object by name or dotted path, importing as necessary.
This is similar to the pydoc function <code class="docutils literal notranslate"><span class="pre">locate</span></code>, except that it checks for
the module from the given path from back to front.</p>
<p>Behaviours like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;calendar.Calendar&quot;</span>
<span class="n">m</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">mo</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">cl</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mo</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-egrecho.utils.register">
<span id="egrecho-utils-register"></span><h1>egrecho.utils.register<a class="headerlink" href="#module-egrecho.utils.register" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.register.Register">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.register.</span></span><span class="sig-name descname"><span class="pre">Register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L10-L172"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.Register" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class is used to register functions or classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.register.Register.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.params.name">¶</a> (<em>str</em>) – The name of the registry.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LITTLES</span> <span class="o">=</span> <span class="n">Register</span><span class="p">(</span><span class="s2">&quot;littles&quot;</span><span class="p">)</span>

<span class="nd">@LITTLES</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;litclass&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">LitClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">123</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>

<span class="ow">or</span>

<span class="n">LITTLES</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">LitClass</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;litclass&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.Register.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L31-L33"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.Register.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.Register.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn_or_cls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L39-L68"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.Register.register" title="Permalink to this definition"></a></dt>
<dd><p>Adds a function or class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.register.Register.register.params.fn_or_cls"></span><strong>fn_or_cls</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.register.params.fn_or_cls">¶</a> (<em>Callable</em>) – The function to be registered.</p></li>
<li><p><span class="target" id="egrecho.utils.register.Register.register.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.register.params.name">¶</a> (<em>str</em>) – Name string.</p></li>
<li><p><span class="target" id="egrecho.utils.register.Register.register.params.override"></span><strong>override</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.register.params.override">¶</a> (<em>bool</em>) – Whether override if exists.</p></li>
<li><p><span class="target" id="egrecho.utils.register.Register.register.params.**metadata"></span><strong>**metadata</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.register.params.**metadata">¶</a> (<em>dict</em>) – Additional dict to be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.Register.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L112-L141"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.Register.get" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves functions or classes with key name which has already been registed before.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.register.Register.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.get.params.key">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Name of the registered function.</p></li>
<li><p><span class="target" id="egrecho.utils.register.Register.get.params.with_metadata"></span><strong>with_metadata</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.get.params.with_metadata">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Whether to include the associated metadata in the return value.</p></li>
<li><p><span class="target" id="egrecho.utils.register.Register.get.params.strict"></span><strong>strict</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.get.params.strict">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Whether to return all matches or just one.</p></li>
<li><p><span class="target" id="egrecho.utils.register.Register.get.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.Register.get.params.metadata">¶</a> – Metadata used to filter against existing registry item’s metadata.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.Register.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L143-L145"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.Register.keys" title="Permalink to this definition"></a></dt>
<dd><p>Get all name registred.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.register.ExternalRegister">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.register.</span></span><span class="sig-name descname"><span class="pre">ExternalRegister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L175-L179"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ExternalRegister" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#egrecho.utils.register.Register" title="egrecho.utils.register.Register"><code class="xref py py-class docutils literal notranslate"><span class="pre">Register</span></code></a></p>
<p>TODO</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.register.ConcatRegister">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.register.</span></span><span class="sig-name descname"><span class="pre">ConcatRegister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">registers</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L182-L278"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ConcatRegister" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#egrecho.utils.register.Register" title="egrecho.utils.register.Register"><code class="xref py py-class docutils literal notranslate"><span class="pre">Register</span></code></a></p>
<p>This class is used to concatenate multiple registers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.ConcatRegister.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">registers</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L185-L198"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ConcatRegister.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.ConcatRegister.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">with_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L221-L257"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ConcatRegister.get" title="Permalink to this definition"></a></dt>
<dd><p>Retrieves functions or classes with key name which has already been registed before.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.register.ConcatRegister.get.params.key"></span><strong>key</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.ConcatRegister.get.params.key">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – Name of the registered function.</p></li>
<li><p><span class="target" id="egrecho.utils.register.ConcatRegister.get.params.with_metadata"></span><strong>with_metadata</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.ConcatRegister.get.params.with_metadata">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Whether to include the associated metadata in the return value.</p></li>
<li><p><span class="target" id="egrecho.utils.register.ConcatRegister.get.params.strict"></span><strong>strict</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.ConcatRegister.get.params.strict">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) – Whether to return all matches or just one.</p></li>
<li><p><span class="target" id="egrecho.utils.register.ConcatRegister.get.params.metadata"></span><strong>metadata</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.ConcatRegister.get.params.metadata">¶</a> – Metadata used to filter against existing registry item’s metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]], <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.ConcatRegister.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L259-L260"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ConcatRegister.keys" title="Permalink to this definition"></a></dt>
<dd><p>Get all name registred.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.register.StrRegister">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.register.</span></span><span class="sig-name descname"><span class="pre">StrRegister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L281-L381"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.StrRegister" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Registers multiple strings, which can be used to create alias names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.register.StrRegister.params.name"></span><strong>name</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.StrRegister.params.name">¶</a> (<em>str</em>) – The name of the registry.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TOTAL_STEPS</span> <span class="o">=</span> <span class="n">StrRegister</span><span class="p">(</span><span class="s2">&quot;total_steps&quot;</span><span class="p">)</span>

<span class="n">TOTAL_STEPS</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;num_training_steps&quot;</span><span class="p">)</span>

<span class="ow">or</span>

<span class="n">TOTAL_STEPS</span><span class="o">.</span><span class="n">register</span><span class="p">([</span><span class="s2">&quot;num_training_steps&quot;</span><span class="p">,])</span>

<span class="k">assert</span> <span class="n">TOTAL_STEPS</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;total_steps&quot;</span><span class="p">,</span><span class="s2">&quot;num_training_steps&quot;</span><span class="p">]</span>
<span class="k">assert</span> <span class="s2">&quot;num_training_steps&quot;</span> <span class="ow">in</span> <span class="n">TOTAL_STEPS</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.StrRegister.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L301-L305"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.StrRegister.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.StrRegister.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">str_or_strs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L311-L329"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.StrRegister.register" title="Permalink to this definition"></a></dt>
<dd><p>Adds a string or sequence of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="egrecho.utils.register.StrRegister.register.params.str_or_strs"></span><strong>str_or_strs</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.register.StrRegister.register.params.str_or_strs">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>]</span>) – String(s) to be registed.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.StrRegister.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L352-L354"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.StrRegister.keys" title="Permalink to this definition"></a></dt>
<dd><p>Get all name registred.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.register.ConcatStrRegister">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.register.</span></span><span class="sig-name descname"><span class="pre">ConcatStrRegister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">registers</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L384-L425"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ConcatStrRegister" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#egrecho.utils.register.StrRegister" title="egrecho.utils.register.StrRegister"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrRegister</span></code></a></p>
<p>This class is used to concatenate multiple registers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.ConcatStrRegister.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">registers</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L387-L390"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ConcatStrRegister.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.register.ConcatStrRegister.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/register.py#L410-L411"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.register.ConcatStrRegister.keys" title="Permalink to this definition"></a></dt>
<dd><p>Get all name registred.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-egrecho.utils.torch_utils">
<span id="egrecho-utils-torch-utils"></span><h1>egrecho.utils.torch_utils<a class="headerlink" href="#module-egrecho.utils.torch_utils" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.torch_utils.RandomValue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.torch_utils.</span></span><span class="sig-name descname"><span class="pre">RandomValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/torch_utils.py#L13-L38"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.torch_utils.RandomValue" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generate a uniform distribution in the range <code class="docutils literal notranslate"><span class="pre">[start,</span> <span class="pre">end]</span></code>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.torch_utils.RandomValue.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.torch_utils.RandomValue.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.torch_utils.batch_pad_right">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.torch_utils.</span></span><span class="sig-name descname"><span class="pre">batch_pad_right</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'constant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/torch_utils.py#L42-L96"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.torch_utils.batch_pad_right" title="Permalink to this definition"></a></dt>
<dd><p>Given a list of torch tensors it batches them together by padding to the right
on each dimension in order to get same length for all.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.torch_utils.batch_pad_right.params.tensors"></span><strong>tensors</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.torch_utils.batch_pad_right.params.tensors">¶</a> (<em>list</em>) – List of tensor we wish to pad together.</p></li>
<li><p><span class="target" id="egrecho.utils.torch_utils.batch_pad_right.params.mode"></span><strong>mode</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.torch_utils.batch_pad_right.params.mode">¶</a> (<em>str</em>) – Padding mode see torch.nn.functional.pad documentation.</p></li>
<li><p><span class="target" id="egrecho.utils.torch_utils.batch_pad_right.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.torch_utils.batch_pad_right.params.value">¶</a> (<em>float</em>) – Padding value see torch.nn.functional.pad documentation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>tensor</strong> (<em>torch.Tensor</em>) – Padded tensor.</p></li>
<li><p><strong>valid_vals</strong> (<em>list</em>) – List containing proportion for each dimension of original, non-padded values.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.torch_utils.pad_right_to">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.torch_utils.</span></span><span class="sig-name descname"><span class="pre">pad_right_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tensor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'constant'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/torch_utils.py#L99-L143"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.torch_utils.pad_right_to" title="Permalink to this definition"></a></dt>
<dd><p>This function takes a torch tensor of arbitrary shape and pads it to target
shape by appending values on the right.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.torch_utils.pad_right_to.params.tensor"></span><strong>tensor</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.torch_utils.pad_right_to.params.tensor">¶</a> (<em>input torch tensor</em>) – Input tensor whose dimension we need to pad.</p></li>
<li><p><span class="target" id="egrecho.utils.torch_utils.pad_right_to.params.target_shape"></span><strong>target_shape</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.torch_utils.pad_right_to.params.target_shape">¶</a> (<em>(</em><em>list</em><em>, </em><em>tuple</em><em>)</em>) – Target shape we want for the target tensor its len must be equal to tensor.ndim</p></li>
<li><p><span class="target" id="egrecho.utils.torch_utils.pad_right_to.params.mode"></span><strong>mode</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.torch_utils.pad_right_to.params.mode">¶</a> (<em>str</em>) – Pad mode, please refer to torch.nn.functional.pad documentation.</p></li>
<li><p><span class="target" id="egrecho.utils.torch_utils.pad_right_to.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.torch_utils.pad_right_to.params.value">¶</a> (<em>float</em>) – Pad value, please refer to torch.nn.functional.pad documentation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>tensor</strong> (<em>torch.Tensor</em>) – Padded tensor.</p></li>
<li><p><strong>valid_vals</strong> (<em>list</em>) – List containing proportion for each dimension of original, non-padded values.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.torch_utils.audio_collate_fn">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.torch_utils.</span></span><span class="sig-name descname"><span class="pre">audio_collate_fn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">waveforms</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/torch_utils.py#L146-L158"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.torch_utils.audio_collate_fn" title="Permalink to this definition"></a></dt>
<dd><p>Pad a list of waves with shape <cite>(…, T)</cite>, returns a tuple containing tensor and a list of its lengths.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Tensor</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.torch_utils.to_numpy">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.torch_utils.</span></span><span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/torch_utils.py#L161-L172"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.torch_utils.to_numpy" title="Permalink to this definition"></a></dt>
<dd><p>Convert a  PyTorch tensor, Numpy array or python list to a Numpy array.</p>
</dd></dl>

</section>
<section id="module-egrecho.utils.types">
<span id="egrecho-utils-types"></span><h1>egrecho.utils.types<a class="headerlink" href="#module-egrecho.utils.types" title="Permalink to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.types.ModelOutput">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.types.</span></span><span class="sig-name descname"><span class="pre">ModelOutput</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L15-L132"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.ModelOutput" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></p>
<p>Base class for all model outputs as dataclass. Copied from <a class="reference external" href="https://github.com/huggingface/transformers/blob/main/src/transformers/utils/generic.py#ModelOutput">huggingface modelout</a>.</p>
<p>Has a <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code> that allows indexing by integer or slice (like a
tuple) or strings (like a dictionary) that will ignore the <cite>None</cite> attributes. Otherwise behaves like a regular
python dictionary.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can’t unpack a <cite>ModelOutput</cite> directly. Use the [<cite>ModelOutput.to_tuple</cite>] method to convert it to a tuple
before.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.types.ModelOutput.setdefault">
<span class="sig-name descname"><span class="pre">setdefault</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L91-L95"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.ModelOutput.setdefault" title="Permalink to this definition"></a></dt>
<dd><p>remove this action</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.types.ModelOutput.pop">
<span class="sig-name descname"><span class="pre">pop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L97-L101"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.ModelOutput.pop" title="Permalink to this definition"></a></dt>
<dd><p>remove this action</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.types.ModelOutput.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L103-L107"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.ModelOutput.update" title="Permalink to this definition"></a></dt>
<dd><p>remove this action</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.types.ModelOutput.to_tuple">
<span class="sig-name descname"><span class="pre">to_tuple</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L128-L132"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.ModelOutput.to_tuple" title="Permalink to this definition"></a></dt>
<dd><p>Convert self to a tuple containing all the attributes/keys that are not <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.types.PipeOutput">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.types.</span></span><span class="sig-name descname"><span class="pre">PipeOutput</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L135-L136"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.PipeOutput" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#egrecho.utils.types.ModelOutput" title="egrecho.utils.types.ModelOutput"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelOutput</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.types.SingletonMeta">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.types.</span></span><span class="sig-name descname"><span class="pre">SingletonMeta</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L139-L155"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.SingletonMeta" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></p>
<p>A metaclass for creating singleton classes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.types.SingletonMeta.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L146-L155"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.SingletonMeta.__call__" title="Permalink to this definition"></a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.types.StrEnum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.types.</span></span><span class="sig-name descname"><span class="pre">StrEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L159-L266"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.StrEnum" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></p>
<p>Type of any enumerator with allowed comparison to string invariant to cases.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MySE</span><span class="p">(</span><span class="n">StrEnum</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">t1</span> <span class="o">=</span> <span class="s2">&quot;T-1&quot;</span>
<span class="gp">... </span>    <span class="n">t2</span> <span class="o">=</span> <span class="s2">&quot;T-2&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MySE</span><span class="p">(</span><span class="s2">&quot;T-1&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">MySE</span><span class="o">.</span><span class="n">t1</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MySE</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="s2">&quot;t-2&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="n">MySE</span><span class="o">.</span><span class="n">t2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MySE</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="s2">&quot;t-2&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="go">&lt;MySE.t2: &#39;T-2&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MySE</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="s2">&quot;t-3&quot;</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;any&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">  </span><span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Invalid match: expected one of [&#39;t1&#39;, &#39;t2&#39;, &#39;T-1&#39;, &#39;T-2&#39;], but got t-3.</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.types.StrEnum.from_str">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'key'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L184-L212"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.StrEnum.from_str" title="Permalink to this definition"></a></dt>
<dd><p>Create <code class="docutils literal notranslate"><span class="pre">StrEnum</span></code> from a string matching the key or value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="egrecho.utils.types.StrEnum.from_str.params.value"></span><strong>value</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.types.StrEnum.from_str.params.value">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span>) – matching string</p></li>
<li><p><span class="target" id="egrecho.utils.types.StrEnum.from_str.params.source"></span><strong>source</strong><a class="paramlink headerlink reference internal" href="#egrecho.utils.types.StrEnum.from_str.params.source">¶</a> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Literal</span></code>[<code class="docutils literal notranslate"><span class="pre">'key'</span></code>, <code class="docutils literal notranslate"><span class="pre">'value'</span></code>, <code class="docutils literal notranslate"><span class="pre">'any'</span></code>]</span>) – <p>compare with:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;key&quot;</span></code>: validates only from the enum keys, typical alphanumeric with “_”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;value&quot;</span></code>: validates only from the values, could be any string</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;any&quot;</span></code>: validates with any key or value, but key has priority</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if requested string does not match any option based on selected source.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="#egrecho.utils.types.StrEnum" title="egrecho.utils.types.StrEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrEnum</span></code></a></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.types.StrEnum.try_from_str">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">try_from_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'key'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L214-L227"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.StrEnum.try_from_str" title="Permalink to this definition"></a></dt>
<dd><p>Try to create emun and if it does not match any, return <cite>None</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<a class="reference internal" href="#egrecho.utils.types.StrEnum" title="egrecho.utils.types.StrEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrEnum</span></code></a>]</span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.types.Split">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.types.</span></span><span class="sig-name descname"><span class="pre">Split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/types.py#L269-L281"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.types.Split" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#egrecho.utils.types.StrEnum" title="egrecho.utils.types.StrEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">StrEnum</span></code></a></p>
<p>Contains Enums of split.</p>
</dd></dl>

</section>
<section id="egrecho-utils-dummy">
<h1>egrecho.utils.dummy<a class="headerlink" href="#egrecho-utils-dummy" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.dummy.html">egrecho.utils.dummy.generate</a></li>
</ul>
</div>
</section>
<section id="egrecho-utils-io">
<h1>egrecho.utils.io<a class="headerlink" href="#egrecho-utils-io" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.io.html">egrecho.utils.io.files</a></li>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.kaldi">egrecho.utils.io.kaldi</a></li>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.reader">egrecho.utils.io.reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.resolve_ckpt">egrecho.utils.io.resolve_ckpt</a></li>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.utils">egrecho.utils.io.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.io.html#module-egrecho.utils.io.writer">egrecho.utils.io.writer</a></li>
</ul>
</div>
</section>
<section id="egrecho-utils-patch">
<h1>egrecho.utils.patch<a class="headerlink" href="#egrecho-utils-patch" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.patch.html">egrecho.utils.patch.io_patch</a></li>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.patch.html#module-egrecho.utils.patch.torchdata_patch">egrecho.utils.patch.torchdata_patch</a></li>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.patch.html#egrecho-utils-patch-simple-parse-patch">egrecho.utils.patch.simple_parse_patch</a></li>
</ul>
</div>
</section>
<section id="egrecho-utils-seeder">
<h1>egrecho.utils.seeder<a class="headerlink" href="#egrecho-utils-seeder" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="egrecho.utils.seeder.html">egrecho.utils.seeder.seed</a></li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../core/teacher.html" class="btn btn-neutral float-left" title="egrecho.core.teacher" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="egrecho.utils.dummy.html" class="btn btn-neutral float-right" title="egrecho.utils.dummy.generate" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Dexin Liao.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>