<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="egrecho.utils.patch.io_patch" href="egrecho.utils.patch.html" /><link rel="prev" title="egrecho.utils.dummy.generate" href="egrecho.utils.dummy.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.05.06 -->
        <title>egrecho.utils.io.files - Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" />
    
    


<style>
  body {
    --color-code-background: #f0f0f0;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     <em>Feedback welcomed üéâ at <a href='http://xxx'>dummy url</a></em> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Content</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_dynamic_project.html">Dynamic Project</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">egrecho.core</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of egrecho.core</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../core/config.html">egrecho.core.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/data_builder.html">egrecho.core.data_builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/feature_extractor.html">egrecho.core.feature_extractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/loads.html">egrecho.core.loads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/module.html">egrecho.core.module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/optimization.html">egrecho.core.optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/parser.html">egrecho.core.parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/teacher.html">egrecho.core.teacher</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../api.html#egrecho-utils">egrecho.utils</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of egrecho.utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html">egrecho.utils.apply</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.common">egrecho.utils.common</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.constants">egrecho.utils.constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.cuda_utils">egrecho.utils.cuda_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.data_utils">egrecho.utils.data_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.dist">egrecho.utils.dist</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.imports">egrecho.utils.imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.logging">egrecho.utils.logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.misc">egrecho.utils.misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.register">egrecho.utils.register</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.torch_utils">egrecho.utils.torch_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#module-egrecho.utils.types">egrecho.utils.types</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="index.html#egrecho-utils-dummy">egrecho.utils.dummy</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of egrecho.utils.dummy</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.dummy.html">egrecho.utils.dummy.generate</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html#egrecho-utils-io">egrecho.utils.io</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of egrecho.utils.io</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">egrecho.utils.io.files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-egrecho.utils.io.kaldi">egrecho.utils.io.kaldi</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-egrecho.utils.io.reader">egrecho.utils.io.reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-egrecho.utils.io.resolve_ckpt">egrecho.utils.io.resolve_ckpt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-egrecho.utils.io.utils">egrecho.utils.io.utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-egrecho.utils.io.writer">egrecho.utils.io.writer</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="index.html#egrecho-utils-patch">egrecho.utils.patch</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of egrecho.utils.patch</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.patch.html">egrecho.utils.patch.io_patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.patch.html#module-egrecho.utils.patch.torchdata_patch">egrecho.utils.patch.torchdata_patch</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="egrecho.utils.patch.html#egrecho-utils-patch-simple-parse-patch">egrecho.utils.patch.simple_parse_patch</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of egrecho.utils.patch.simple_parse_patch</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html">egrecho.utils.patch.simple_parse_patch._utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html#module-egrecho.utils.patch.simple_parse_patch.decoding">egrecho.utils.patch.simple_parse_patch.decoding</a></li>
<li class="toctree-l4"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html#module-egrecho.utils.patch.simple_parse_patch.serializable">egrecho.utils.patch.simple_parse_patch.serializable</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.html#egrecho-utils-patch-simple-parse-patch-annotation-utils">egrecho.utils.patch.simple_parse_patch.annotation_utils</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of egrecho.utils.patch.simple_parse_patch.annotation_utils</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.annotation_utils.html">egrecho.utils.patch.simple_parse_patch.annotation_utils</a></li>
<li class="toctree-l5"><a class="reference internal" href="egrecho.utils.patch.simple_parse_patch.annotation_utils.html#module-egrecho.utils.patch.simple_parse_patch.annotation_utils.get_field_annotations">egrecho.utils.patch.simple_parse_patch.annotation_utils.get_field_annotations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="index.html#egrecho-utils-seeder">egrecho.utils.seeder</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of egrecho.utils.seeder</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="egrecho.utils.seeder.html">egrecho.utils.seeder.seed</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html#egrecho-pipeline">egrecho.pipeline</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of egrecho.pipeline</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/index.html">egrecho.pipeline.base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline/index.html#module-egrecho.pipeline.speaker_embedding">egrecho.pipeline.speaker_embedding</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/wangers/subtools2/blob/master/docs/source/api/utils/egrecho.utils.io.md?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/wangers/subtools2/edit/master/docs/source/api/utils/egrecho.utils.io.md" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="module-egrecho.utils.io.files">
<span id="egrecho-utils-io-files"></span><h1>egrecho.utils.io.files<a class="headerlink" href="#module-egrecho.utils.io.files" title="Permalink to this heading">#</a></h1>
<p>Utilites to parse file paths.</p>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.files.is_remote_url">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">is_remote_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url_or_filename</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L67-L70"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.is_remote_url" title="Permalink to this definition">#</a></dt>
<dd><p>Whether a path is remote.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.files.get_filename">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">get_filename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L73-L80"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.get_filename" title="Permalink to this definition">#</a></dt>
<dd><p>get file‚Äôs name from remote or local.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.files.DataFilesList">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">DataFilesList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin_metadata</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L83-L122"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.DataFilesList" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Url</span></code>]]</p>
<p>List of data files (absolute local paths or URLs).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from_local_or_remote</span></code>: resolve patterns from a local path</p></li>
</ul>
<p>Moreover DataFilesList has an additional attribute <code class="docutils literal notranslate"><span class="pre">origin_metadata</span></code>.
It can store:</p>
<ul class="simple">
<li><p>the last modified time of local files.</p></li>
<li><p>Url metadata is not implemented currently.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.files.sanitize_patterns">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">sanitize_patterns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">patterns</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L125-L146"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.sanitize_patterns" title="Permalink to this definition">#</a></dt>
<dd><p>Take the data_files patterns from the user, and format them into a dictionary.
Each key is the name of the split, and each value is a list of data files patterns (paths or urls).
The default split is ‚Äútrain‚Äù.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dictionary of split_name -&gt; list of file_patterns</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>patterns</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.files.DataFilesDict">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">DataFilesDict</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L149-L178"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.DataFilesDict" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <a class="reference internal" href="#egrecho.utils.io.files.DataFilesList" title="egrecho.utils.io.files.DataFilesList"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFilesList</span></code></a>]</p>
<p>Dict of split_name -&gt; list of data files (absolute local paths or URLs).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from_local_or_remote</span></code>: resolve patterns from a local path</p></li>
</ul>
<p>Moreover each list is a DataFilesList. For more info, see <code class="docutils literal notranslate"><span class="pre">DataFilesList</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.files.resolve_patterns_locally_or_by_urls">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">resolve_patterns_locally_or_by_urls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patterns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L181-L244"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.resolve_patterns_locally_or_by_urls" title="Permalink to this definition">#</a></dt>
<dd><p>Resolve the paths and URLs of the data files from the patterns passed by the user.
URLs are just returned as is.</p>
<p>You can use patterns to resolve multiple local files. Here are a few examples:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*.csv</span></code> to match all the CSV files at the first level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">**.csv</span></code> to match all the CSV files at any level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/*</span></code> to match all the files inside ‚Äúdata‚Äù</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/**</span></code> to match all the files inside ‚Äúdata‚Äù and its subdirectories</p></li>
</ul>
<p>The patterns are resolved using the fsspec glob.
Here are some behaviors specific to fsspec glob that are different from glob.glob, Path.glob, Path.match or fnmatch:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'*'</span></code> matches only first level items</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'**'</span></code> matches all items</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'**/*'</span></code> matches all at least second level items</p></li>
</ul>
<p>More generally:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'*'</span></code> matches any character except a forward-slash (to match just the file or directory name)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'**'</span></code> matches any character including a forward-slash /</p></li>
</ul>
<p>Hidden files and directories (i.e. whose names start with a dot) are ignored, unless they are explicitly requested.
The same applies to special directories that start with a double underscore like ‚Äú__pycache__‚Äù.
You can still include one if the pattern explicilty mentions it:</p>
<ul>
<li><p>to include a hidden file: <code class="docutils literal notranslate"><span class="pre">&quot;*/.hidden.txt&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;*/.*&quot;</span></code></p></li>
<li><p>to include a hidden directory: <code class="docutils literal notranslate"><span class="pre">&quot;.hidden/*&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;.*/*&quot;</span></code></p></li>
<li><p>to include a special directory: <code class="docutils literal notranslate"><span class="pre">&quot;__special__/*&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;__*/*&quot;</span></code></p>
<blockquote>
<div><p>e.g., <code class="docutils literal notranslate"><span class="pre">glob.glob('**/*',</span> <span class="pre">recursive=True)</span></code>, the last <code class="docutils literal notranslate"><span class="pre">/*</span></code> is invalid as greedy mode of first pattern <code class="docutils literal notranslate"><span class="pre">'**'</span></code>.</p>
</div></blockquote>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_path</strong> (<em>str</em>) -- Base path to use when resolving relative paths.</p></li>
<li><p><strong>patterns</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) -- Unix patterns or paths or URLs of the data files to resolve.
The paths can be absolute or relative to base_path.</p></li>
<li><p><strong>allowed_extensions</strong> (<em>Optional</em><em>[</em><em>list</em><em>]</em><em>, </em><em>optional</em>) -- White-list of file extensions to use. Defaults to None (all extensions).
For example: allowed_extensions=[‚Äúcsv‚Äù, ‚Äújson‚Äù, ‚Äútxt‚Äù, ‚Äúparquet‚Äù]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of paths or URLs to the local or remote files that match the patterns.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Union[Path, Url]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.files.resolve_patterns">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">resolve_patterns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">patterns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowed_extensions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L181-L244"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.resolve_patterns" title="Permalink to this definition">#</a></dt>
<dd><p>Resolve the paths and URLs of the data files from the patterns passed by the user.
URLs are just returned as is.</p>
<p>You can use patterns to resolve multiple local files. Here are a few examples:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*.csv</span></code> to match all the CSV files at the first level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">**.csv</span></code> to match all the CSV files at any level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/*</span></code> to match all the files inside ‚Äúdata‚Äù</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/**</span></code> to match all the files inside ‚Äúdata‚Äù and its subdirectories</p></li>
</ul>
<p>The patterns are resolved using the fsspec glob.
Here are some behaviors specific to fsspec glob that are different from glob.glob, Path.glob, Path.match or fnmatch:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'*'</span></code> matches only first level items</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'**'</span></code> matches all items</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'**/*'</span></code> matches all at least second level items</p></li>
</ul>
<p>More generally:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'*'</span></code> matches any character except a forward-slash (to match just the file or directory name)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'**'</span></code> matches any character including a forward-slash /</p></li>
</ul>
<p>Hidden files and directories (i.e. whose names start with a dot) are ignored, unless they are explicitly requested.
The same applies to special directories that start with a double underscore like ‚Äú__pycache__‚Äù.
You can still include one if the pattern explicilty mentions it:</p>
<ul>
<li><p>to include a hidden file: <code class="docutils literal notranslate"><span class="pre">&quot;*/.hidden.txt&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;*/.*&quot;</span></code></p></li>
<li><p>to include a hidden directory: <code class="docutils literal notranslate"><span class="pre">&quot;.hidden/*&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;.*/*&quot;</span></code></p></li>
<li><p>to include a special directory: <code class="docutils literal notranslate"><span class="pre">&quot;__special__/*&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;__*/*&quot;</span></code></p>
<blockquote>
<div><p>e.g., <code class="docutils literal notranslate"><span class="pre">glob.glob('**/*',</span> <span class="pre">recursive=True)</span></code>, the last <code class="docutils literal notranslate"><span class="pre">/*</span></code> is invalid as greedy mode of first pattern <code class="docutils literal notranslate"><span class="pre">'**'</span></code>.</p>
</div></blockquote>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_path</strong> (<em>str</em>) -- Base path to use when resolving relative paths.</p></li>
<li><p><strong>patterns</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) -- Unix patterns or paths or URLs of the data files to resolve.
The paths can be absolute or relative to base_path.</p></li>
<li><p><strong>allowed_extensions</strong> (<em>Optional</em><em>[</em><em>list</em><em>]</em><em>, </em><em>optional</em>) -- White-list of file extensions to use. Defaults to None (all extensions).
For example: allowed_extensions=[‚Äúcsv‚Äù, ‚Äújson‚Äù, ‚Äútxt‚Äù, ‚Äúparquet‚Äù]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of paths or URLs to the local or remote files that match the patterns.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[Union[Path, Url]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.files.resolve_file">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.files.</span></span><span class="sig-name descname"><span class="pre">resolve_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/files.py#L304-L319"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.files.resolve_file" title="Permalink to this definition">#</a></dt>
<dd><p>Resolve a single file</p>
<p>if given base_path and rel fname, get the file subject the base_path.</p>
</dd></dl>

</section>
<section id="module-egrecho.utils.io.kaldi">
<span id="egrecho-utils-io-kaldi"></span><h1>egrecho.utils.io.kaldi<a class="headerlink" href="#module-egrecho.utils.io.kaldi" title="Permalink to this heading">#</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.valid_kaldi_storage_name">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">valid_kaldi_storage_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/kaldi.py#L16-L23"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.kaldi.valid_kaldi_storage_name" title="Permalink to this definition">#</a></dt>
<dd><p>As we will add <code class="docutils literal notranslate"><span class="pre">.scp</span></code>, <code class="docutils literal notranslate"><span class="pre">.ark</span></code> suffix in writer, suffix should not contains them.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.close_cached_kaldi_handles">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">close_cached_kaldi_handles</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/kaldi.py#L26-L32"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.kaldi.close_cached_kaldi_handles" title="Permalink to this definition">#</a></dt>
<dd><p>Closes the cached file handles in <code class="docutils literal notranslate"><span class="pre">lookup_cache_or_open</span></code> and
<code class="docutils literal notranslate"><span class="pre">lookup_reader_cache_or_open</span></code> (see respective docs for more details).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.lookup_matrix_reader_cache_or_open">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">lookup_matrix_reader_cache_or_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.io.kaldi.lookup_matrix_reader_cache_or_open" title="Permalink to this definition">#</a></dt>
<dd><p>Helper internal function used in <a class="reference internal" href="#egrecho.utils.io.kaldi.KaldiMatrixReader" title="egrecho.utils.io.kaldi.KaldiMatrixReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">KaldiMatrixReader</span></code></a>.
It opens kaldi scp files and keeps their handles open in a global program cache
to avoid excessive amount of syscalls when the Reader class is instantiated
and destroyed in a loop repeatedly (frequent use-case).</p>
<p>The file handles can be freed at any time by calling :meth`close_cached_file_handles`.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.lookup_vector_reader_cache_or_open">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">lookup_vector_reader_cache_or_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#egrecho.utils.io.kaldi.lookup_vector_reader_cache_or_open" title="Permalink to this definition">#</a></dt>
<dd><p>Helper internal function used in <a class="reference internal" href="#egrecho.utils.io.kaldi.KaldiVectorReader" title="egrecho.utils.io.kaldi.KaldiVectorReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">KaldiVectorReader</span></code></a>.
It opens kaldi scp files and keeps their handles open in a global program cache
to avoid excessive amount of syscalls when the Reader class is instantiated
and destroyed in a loop repeatedly (frequent use-case).</p>
<p>The file handles can be freed at any time by calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">close_cached_file_handles()</span></code>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.KaldiVectorReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">KaldiVectorReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/kaldi.py#L73-L107"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.kaldi.KaldiVectorReader" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Reads Kaldi‚Äôs vector (<code class="docutils literal notranslate"><span class="pre">1-D</span> <span class="pre">float32</span></code>) file (e.g., ‚Äúxvector.scp‚Äù) using kaldi_native_io.
<code class="docutils literal notranslate"><span class="pre">storage_path</span></code> corresponds to the path to file with suffix <code class="docutils literal notranslate"><span class="pre">.scp</span></code>.
<code class="docutils literal notranslate"><span class="pre">storage_key</span></code> corresponds to the utterance-id in Kaldi.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Requires <code class="docutils literal notranslate"><span class="pre">kaldi_native_io</span></code> to be installed (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">kaldi_native_io</span></code>).</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.KaldiVectorWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">KaldiVectorWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xvector'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/kaldi.py#L110-L169"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.kaldi.KaldiVectorWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Write vector data (<code class="docutils literal notranslate"><span class="pre">1-D</span> <span class="pre">float32</span></code>) to Kaldi‚Äôs ‚Äú.scp‚Äù and ‚Äú.ark‚Äù files using kaldi_native_io.
<code class="docutils literal notranslate"><span class="pre">storage_path</span></code> corresponds to a directory where we‚Äôll create ‚Äúxvector.scp‚Äù
and ‚Äúxvector.ark‚Äù files.
<code class="docutils literal notranslate"><span class="pre">storage_key</span></code> corresponds to the utterance-id in Kaldi.
<code class="docutils literal notranslate"><span class="pre">storage_name</span></code> specified the stem name, i.e., ‚Äúxvector‚Äù.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">192</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">KaldiVectorWriter</span><span class="p">(</span><span class="s1">&#39;xvectordir&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;utt1&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">KaldiVectorReader</span><span class="p">(</span><span class="s1">&#39;xvectordir/xvector.scp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;utt1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_equal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">read_data</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Requires <code class="docutils literal notranslate"><span class="pre">kaldi_native_io</span></code> to be installed (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">kaldi_native_io</span></code>).</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.KaldiMatrixReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">KaldiMatrixReader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/kaldi.py#L172-L211"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.kaldi.KaldiMatrixReader" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Reads Kaldi‚Äôs ‚Äúfeats.scp‚Äù file using kaldi_native_io.
<code class="docutils literal notranslate"><span class="pre">storage_path</span></code> corresponds to the path to <code class="docutils literal notranslate"><span class="pre">feats.scp</span></code>.
<code class="docutils literal notranslate"><span class="pre">storage_key</span></code> corresponds to the utterance-id in Kaldi.</p>
<dl class="simple">
<dt>referring:</dt><dd><p><a class="reference external" href="https://github.com/lhotse-speech/lhotse/blob/master/lhotse/features/io.py">https://github.com/lhotse-speech/lhotse/blob/master/lhotse/features/io.py</a></p>
</dd>
</dl>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Requires <code class="docutils literal notranslate"><span class="pre">kaldi_native_io</span></code> to be installed (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">kaldi_native_io</span></code>).</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.kaldi.KaldiMatrixWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.kaldi.</span></span><span class="sig-name descname"><span class="pre">KaldiMatrixWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'feats'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compression_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/kaldi.py#L214-L290"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.kaldi.KaldiMatrixWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Write data to Kaldi‚Äôs ‚Äúfeats.scp‚Äù and ‚Äúfeats.ark‚Äù files using kaldi_native_io.
<code class="docutils literal notranslate"><span class="pre">storage_path</span></code> corresponds to a directory where we‚Äôll create ‚Äúfeats.scp‚Äù
and ‚Äúfeats.ark‚Äù files.
<code class="docutils literal notranslate"><span class="pre">storage_key</span></code> corresponds to the utterance-id in Kaldi.
<code class="docutils literal notranslate"><span class="pre">storage_name</span></code> specified the stem name, i.e., ‚Äúfeats‚Äù.</p>
<dl class="simple">
<dt>referring:</dt><dd><p><a class="reference external" href="https://github.com/lhotse-speech/lhotse/blob/master/lhotse/features/io.py">https://github.com/lhotse-speech/lhotse/blob/master/lhotse/features/io.py</a></p>
</dd>
</dl>
<p>The following <code class="docutils literal notranslate"><span class="pre">compression_method</span></code> values are supported by kaldi_native_io:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kAutomaticMethod</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">kSpeechFeature</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">kTwoByteAuto</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">kTwoByteSignedInteger</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">kOneByteAuto</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">kOneByteUnsignedInteger</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">kOneByteZeroOne</span> <span class="o">=</span> <span class="mi">7</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Setting compression_method works only with 2D arrays.</p>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">131</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">KaldiMatrixWriter</span><span class="p">(</span><span class="s1">&#39;featdir&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;utt1&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">KaldiMatrixReader</span><span class="p">(</span><span class="s1">&#39;featdir/feats.scp&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">read_data</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;utt1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">testing</span><span class="o">.</span><span class="n">assert_equal</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">read_data</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Requires <code class="docutils literal notranslate"><span class="pre">kaldi_native_io</span></code> to be installed (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">kaldi_native_io</span></code>).</p>
</div>
</dd></dl>

</section>
<section id="module-egrecho.utils.io.reader">
<span id="egrecho-utils-io-reader"></span><h1>egrecho.utils.io.reader<a class="headerlink" href="#module-egrecho.utils.io.reader" title="Permalink to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.reader.JsonlIterable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.reader.</span></span><span class="sig-name descname"><span class="pre">JsonlIterable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/reader.py#L17-L32"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.reader.JsonlIterable" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Get example iterator from json lines file.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.reader.JsonIterable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.reader.</span></span><span class="sig-name descname"><span class="pre">JsonIterable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/reader.py#L35-L49"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.reader.JsonIterable" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Get example iterator from json file.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.reader.CsvIterable">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.reader.</span></span><span class="sig-name descname"><span class="pre">CsvIterable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">csv_reader_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/reader.py#L52-L72"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.reader.CsvIterable" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Get example iterator from csv file.</p>
</dd></dl>

</section>
<section id="module-egrecho.utils.io.resolve_ckpt">
<span id="egrecho-utils-io-resolve-ckpt"></span><h1>egrecho.utils.io.resolve_ckpt<a class="headerlink" href="#module-egrecho.utils.io.resolve_ckpt" title="Permalink to this heading">#</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.resolve_ckpt.resolve_ckpt">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.resolve_ckpt.</span></span><span class="sig-name descname"><span class="pre">resolve_ckpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'last.ckpt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dirpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'version'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_k_fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'best_k_models.yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_k_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ckpt_subdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'checkpoints'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/resolve_ckpt.py#L12-L115"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.resolve_ckpt.resolve_ckpt" title="Permalink to this definition">#</a></dt>
<dd><p>Resolve checkpoint path from local or remote.</p>
<p>Automatically search checkpoint, parameters except <code class="docutils literal notranslate"><span class="pre">checkpoint</span></code> is for local fs,
checkpoint can be either:</p>
<ul class="simple">
<li><p>remote url (e.g., startwith ‚Äúhttp‚Äù): return it directly, otherwise change to local mode.</p></li>
<li><p>absolute file path: return it if exists, otherwise raise a FileExistError.</p></li>
<li><p>relative file name: rel to <code class="docutils literal notranslate"><span class="pre">dirpath</span></code>, return it if exist, otherwise change mode to auto-matching.</p></li>
<li><p>auto-matching: <code class="docutils literal notranslate"><span class="pre">checkpoint</span></code> must a parameter of one level rel path (recommand one file name)</p></li>
</ul>
<p>to avoid messing:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dirpath</span></code>: base dir.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ckpt_subdir</span></code>: defaults to name as ‚Äúcheckpoints‚Äù</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">version</span></code>: version subdir, if specified will check it otherwise find the max version number (means latest training).</p></li>
<li><p>See <a class="reference internal" href="#egrecho.utils.io.resolve_ckpt.resolve_version_ckpt" title="egrecho.utils.io.resolve_ckpt.resolve_version_ckpt"><code class="xref py py-func docutils literal notranslate"><span class="pre">resolve_version_ckpt()</span></code></a> and <a class="reference internal" href="#egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt" title="egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt"><code class="xref py py-func docutils literal notranslate"><span class="pre">resolve_rel_ckpt()</span></code></a> for details.</p></li>
</ul>
<p>The minist matching unit is like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./dirpath/
‚îú‚îÄ‚îÄ best_k_models.yaml
‚îú‚îÄ‚îÄ last.ckpt
‚îî‚îÄ‚îÄ abc.ckpt

or

./dirpath/
‚îú‚îÄ‚îÄ hparams.yaml
‚îî‚îÄ‚îÄ checkpoints
    ‚îú‚îÄ‚îÄ best_k_models.yaml
    ‚îú‚îÄ‚îÄ last.ckpt
    ‚îî‚îÄ‚îÄ abc.ckpt
</pre></div>
</div>
<p>With version subdir structure can be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./dirpath/version_1
        ‚îú‚îÄ‚îÄ hparams.yaml
        ‚îî‚îÄ‚îÄ checkpoints
            ‚îú‚îÄ‚îÄ best_k_models.yaml
            ‚îú‚îÄ‚îÄ last.ckpt
            ‚îî‚îÄ‚îÄ abc.ckpt
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>checkpoint</strong> (<em>str</em><em>, </em><em>optional</em>) -- The file name of checkpoint to resolve, local file needs a suffix like ‚Äú.ckpt‚Äù / ‚Äú.pt‚Äù,
While <code class="docutils literal notranslate"><span class="pre">checkpoint=&quot;best&quot;</span></code> is a preseved key means it will find <code class="docutils literal notranslate"><span class="pre">best_k_fname</span></code> which is
a file contains <strong>Dict[BEST_K_MODEL_PATH, BEST_K_SCORE]</strong>, and sort by its score to
match a best ckpt. Defaults to ‚Äúlast.ckpt‚Äù.</p></li>
<li><p><strong>dirpath</strong> (<em>Path</em><em> or </em><em>str</em><em>, </em><em>optional</em>) -- The root path. Defaults to None, which means the current directory.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) -- The versioned subdir name. Conmmonly subdir is named as ‚Äúversion_0/version_1‚Äù, if you specify
the version name with a version num, it will search that version dir, otherwise choose the max number
of version (above ‚Äúversion_1‚Äù). Defaults to ‚Äúversion‚Äù.</p></li>
<li><p><strong>best_k_fname</strong> (<em>str</em><em>, </em><em>optional</em>) -- The filename for the best_k map file. Note that the best model path in best map file may
not in this directory since it is stored in training stage, so we assume that its basename
can matching ckpts in the same level. Defaults to best_k_models.yaml.</p></li>
<li><p><strong>best_k_mode</strong> (<em>Literal</em><em>[</em><em>&quot;max&quot;</em><em>, </em><em>&quot;min&quot;</em><em>]</em><em>, </em><em>optional</em>) -- The mode for selecting the best_k checkpoint. Defaults to ‚Äúmin‚Äù.</p></li>
<li><p><strong>ckpt_subdir</strong> (<em>str</em><em>, </em><em>optional</em>) -- The name of the checkpoints subdir. Defaults to ‚Äúcheckpoints‚Äù.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.resolve_ckpt.resolve_version_ckpt">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.resolve_ckpt.</span></span><span class="sig-name descname"><span class="pre">resolve_version_ckpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'last.ckpt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'version'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_k_fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'best_k_models.yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_k_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ckpt_subdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'checkpoints'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/resolve_ckpt.py#L118-L195"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.resolve_ckpt.resolve_version_ckpt" title="Permalink to this definition">#</a></dt>
<dd><p>Search for a local version directory.</p>
<p>Cares about structure like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./dirpath/version_1
        ‚îú‚îÄ‚îÄ hparams.yaml
        ‚îî‚îÄ‚îÄ checkpoints
            ‚îú‚îÄ‚îÄ best_k_models.yaml
            ‚îú‚îÄ‚îÄ last.ckpt
            ‚îî‚îÄ‚îÄ abc.ckpt
</pre></div>
</div>
<p>Note: Truly matching see <a class="reference internal" href="#egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt" title="egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt"><code class="xref py py-func docutils literal notranslate"><span class="pre">resolve_rel_ckpt()</span></code></a> for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) -- The versioned subdir name. Conmmonly subdir is named as ‚Äúversion_0/version_1‚Äù, if you specify
the version name with a version num, it will search that version dir, otherwise choose the max number
of version (above ‚Äúversion_1‚Äù). Defaults to ‚Äúversion‚Äù.</p></li>
<li><p><strong>dirpath</strong> (<em>Path</em><em> or </em><em>str</em><em>, </em><em>optional</em>) -- The root path. Defaults to None, which means the current directory.</p></li>
<li><p><strong>checkpoint</strong> (<em>str</em><em>, </em><em>optional</em>) -- The file name of checkpoint to resolve, needs a suffix like ‚Äú.ckpt‚Äù / ‚Äú.pt‚Äù,
While <code class="docutils literal notranslate"><span class="pre">checkpoint=&quot;best&quot;</span></code> is a preseved key means it will find <code class="docutils literal notranslate"><span class="pre">best_k_fname</span></code> which is
a file contains <strong>Dict[BEST_K_MODEL_PATH, BEST_K_SCORE]</strong>, and sort by its score to
match a best ckpt. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;last.ckpt&quot;</span></code>.</p></li>
<li><p><strong>best_k_fname</strong> (<em>str</em><em>, </em><em>optional</em>) -- The filename for the best_k map file. Note that the best model path in best map file may
not in this directory since it is stored in training stage, so we assume that its basename
can matching ckpts in the same level. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;best_k_models.yaml&quot;</span></code>.</p></li>
<li><p><strong>best_k_mode</strong> (<em>Literal</em><em>[</em><em>&quot;max&quot;</em><em>, </em><em>&quot;min&quot;</em><em>]</em><em>, </em><em>optional</em>) -- The mode for selecting the best_k checkpoint. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;min&quot;</span></code>.</p></li>
<li><p><strong>ckpt_subdir</strong> (<em>str</em><em>, </em><em>optional</em>) -- The name of the checkpoints subdir. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;checkpoints&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.resolve_ckpt.</span></span><span class="sig-name descname"><span class="pre">resolve_rel_ckpt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dirpath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'last.ckpt'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_k_fname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'best_k_models.yaml'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">best_k_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ckpt_subdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'checkpoints'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/resolve_ckpt.py#L198-L305"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt" title="Permalink to this definition">#</a></dt>
<dd><p>Resolve checkpoint path rel to dirpath.</p>
<p>Automatically search checkpoint in a directory‚Äôs checkpoints subdir, normally names as <code class="docutils literal notranslate"><span class="pre">&quot;checkpoints&quot;</span></code>.
The <code class="docutils literal notranslate"><span class="pre">dirpath</span></code> may has such default structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>./dirpath/
‚îú‚îÄ‚îÄ best_k_models.yaml
‚îú‚îÄ‚îÄ last.ckpt
‚îî‚îÄ‚îÄ abc.ckpt

or

./dirpath/
‚îú‚îÄ‚îÄ hparams.yaml
‚îî‚îÄ‚îÄ checkpoints
    ‚îú‚îÄ‚îÄ best_k_models.yaml
    ‚îú‚îÄ‚îÄ last.ckpt
    ‚îî‚îÄ‚îÄ abc.ckpt
</pre></div>
</div>
<p>First search dirpath , then fallback to its <code class="docutils literal notranslate"><span class="pre">ckpt_subdir</span></code> (checkpoints) subdir match the valid checpoint path
. If all failed, return None.</p>
<p>Note: <code class="docutils literal notranslate"><span class="pre">checkpoint</span></code> must a parameter of one level rel path to avoid mess matching. and deep rel path matching
should in top level function but not here.</p>
<ul class="simple">
<li><p>valid: (last.ckpt, best, ./last.ckpt)</p></li>
<li><p>invalid: (/last.ckpt, mypath/last.ckpt)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dirpath</strong> (<em>Path</em><em> or </em><em>str</em><em>, </em><em>optional</em>) -- The root path. Defaults to None, which means the current directory.</p></li>
<li><p><strong>checkpoint</strong> (<em>str</em><em>, </em><em>optional</em>) -- The file name of checkpoint to resolve, needs a suffix like ‚Äú.ckpt‚Äù / ‚Äú.pt‚Äù,
While checkpoint=‚Äùbest‚Äù is a preseved key means it will find <cite>best_k_fname</cite> which is
a file contains <cite>Dict[BEST_K_MODEL_PATH, BEST_K_SCORE]</cite>, and sort by its score to
match a best ckpt. Defaults to ‚Äúlast.ckpt‚Äù.</p></li>
<li><p><strong>best_k_fname</strong> (<em>str</em><em>, </em><em>optional</em>) -- The filename for the best_k map file. Note that the best model path in best map file may
not in this directory since it is stored in training stage, so we assume that its basename
can matching ckpts in the same level. Defaults to best_k_models.yaml.</p></li>
<li><p><strong>best_k_mode</strong> (<em>Literal</em><em>[</em><em>&quot;max&quot;</em><em>, </em><em>&quot;min&quot;</em><em>]</em><em>, </em><em>optional</em>) -- The mode for selecting the best_k checkpoint. Defaults to ‚Äúmin‚Äù.</p></li>
<li><p><strong>ckpt_subdir</strong> (<em>str</em><em>, </em><em>optional</em>) -- The name of the checkpoints subdir. Defaults to ‚Äúcheckpoints‚Äù.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The resolved checkpoint path or None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">resolve_rel_ckpt</span><span class="p">(</span><span class="s1">&#39;./dirpath&#39;</span><span class="p">,</span> <span class="n">checkpoint</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="go">&#39;/path/to/xxxl.ckpt&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-egrecho.utils.io.utils">
<span id="egrecho-utils-io-utils"></span><h1>egrecho.utils.io.utils<a class="headerlink" href="#module-egrecho.utils.io.utils" title="Permalink to this heading">#</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.auto_open">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">auto_open</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L43-L58"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.auto_open" title="Permalink to this definition">#</a></dt>
<dd><p>Open a Path, if it is end with ‚Äògz‚Äô, will call gzip.open first.</p>
<p>Note: just support local path now.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.JsonMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">JsonMixin</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L78-L98"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.JsonMixin" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Loads/save json mixin.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.YamlMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">YamlMixin</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L101-L124"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.YamlMixin" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Loads/save yaml mixin.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.ConfigFileMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">ConfigFileMixin</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L127-L167"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.ConfigFileMixin" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#egrecho.utils.io.utils.JsonMixin" title="egrecho.utils.io.utils.JsonMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">JsonMixin</span></code></a>, <a class="reference internal" href="#egrecho.utils.io.utils.YamlMixin" title="egrecho.utils.io.utils.YamlMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">YamlMixin</span></code></a></p>
<p>To serialize/deserialize config files in local, support json and yaml.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.SerializationFn">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">SerializationFn</span></span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L174-L202"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.SerializationFn" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Serialization fn mixin.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.load_jsonl_lazy">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">load_jsonl_lazy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L296-L303"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.load_jsonl_lazy" title="Permalink to this definition">#</a></dt>
<dd><p>Load json lines in a lazy way.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.save_jsonl">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">save_jsonl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L306-L314"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.save_jsonl" title="Permalink to this definition">#</a></dt>
<dd><p>Save json lines.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.load_csv_lazy">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">load_csv_lazy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">fmtparams</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L317-L323"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.load_csv_lazy" title="Permalink to this definition">#</a></dt>
<dd><p>Load csv lines in a lazy way.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.repr_dict">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">repr_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inline_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwds</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L326-L343"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.repr_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Make dict more readable.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.buf_count_newlines">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">buf_count_newlines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L354-L367"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.buf_count_newlines" title="Permalink to this definition">#</a></dt>
<dd><p>Count the number of lines in a file</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.read_key_first_lists">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">read_key_first_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">every_bytes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000000</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L370-L398"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.read_key_first_lists" title="Permalink to this definition">#</a></dt>
<dd><p>Reads txt line by line, and items sep with blank in one line.</p>
<p>Returns a list of tuples contains two item, the first column and
the second formated other columns. (the second can be a list of strings when <cite>vector=True</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.read_lists">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">read_lists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">every_bytes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000000</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L401-L425"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.read_lists" title="Permalink to this definition">#</a></dt>
<dd><p>Reads txt line by line, and items sep with blank in one line.</p>
<p>Returns a list of strings
(or a list of lists contains all strings splitted when <cite>vector=True</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.read_key_first_lists_lazy">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">read_key_first_lists_lazy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L428-L449"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.read_key_first_lists_lazy" title="Permalink to this definition">#</a></dt>
<dd><p>Reads txt line by line lazy, and items sep with blank in one line.</p>
<p>Generates tuples contains two item, the first column and
the second formated other columns. (the second can be a list of strings when <cite>vector=True</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="egrecho.utils.io.utils.read_lists_lazy">
<span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.utils.</span></span><span class="sig-name descname"><span class="pre">read_lists_lazy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/utils.py#L452-L469"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.utils.read_lists_lazy" title="Permalink to this definition">#</a></dt>
<dd><p>Reads txt line by line lazy, and items sep with blank in one line.</p>
<p>Returns a list of strings
(or a list of lists contains all strings splitted when <cite>vector=True</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]], <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]</span></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-egrecho.utils.io.writer">
<span id="egrecho-utils-io-writer"></span><h1>egrecho.utils.io.writer<a class="headerlink" href="#module-egrecho.utils.io.writer" title="Permalink to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.writer.SequentialDewWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.writer.</span></span><span class="sig-name descname"><span class="pre">SequentialDewWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/writer.py#L19-L95"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.writer.SequentialDewWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Sequently store dews (manifest), support json lines (jsonl).</p>
<p>This implementation is mostly based on lhotse:
<a class="reference external" href="https://github.com/lhotse-speech/lhotse/blob/master/lhotse/serialization.py#SequentialJsonlWriter">https://github.com/lhotse-speech/lhotse/blob/master/lhotse/serialization.py#SequentialJsonlWriter</a></p>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.io.writer.SequentialDewWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flush</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/writer.py#L74-L95"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.writer.SequentialDewWriter.write" title="Permalink to this definition">#</a></dt>
<dd><p>Serializes a manifest item (e.g. <code class="xref py py-class docutils literal notranslate"></code>) to JSON and stores it in a JSONL file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></span>) -- the manifest to be written.</p></li>
<li><p><strong>flush</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span>) -- should we flush the file after writing (ensures the changes
are synced with the disk and not just buffered for later writing).</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="egrecho.utils.io.writer.ShardWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">egrecho.utils.io.writer.</span></span><span class="sig-name descname"><span class="pre">ShardWriter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/writer.py#L98-L222"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.writer.ShardWriter" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Create a ShardWriter, data should be of webdataset format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code>]</span>) -- output file pattern.</p></li>
<li><p><strong>shard_size</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</span>) -- maximum number of records per shard, if None, means infinite.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If <cite>pattern</cite> is a specify filepath, it will write to one tarfile.</p></li>
<li><p>If given shard_size, it will streamly write items to many tarfiles with a max size <cite>shard_size</cite>,
in this case, the pattern must be specified such as ‚Äò%06d‚Äô for str matching.</p></li>
</ul>
</div>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">{</span><span class="s1">&#39;__key__&#39;</span><span class="p">:</span> <span class="s1">&#39;tom&#39;</span><span class="p">,</span> <span class="s1">&#39;txt&#39;</span><span class="p">:</span> <span class="s1">&#39;i want eat.&#39;</span><span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">{</span><span class="s1">&#39;__key__&#39;</span><span class="p">:</span> <span class="s1">&#39;jimmy&#39;</span><span class="p">,</span> <span class="s1">&#39;txt&#39;</span><span class="p">:</span> <span class="s1">&#39;i want sleep.&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">ShardWriter</span><span class="p">(</span><span class="s1">&#39;./test_fake.tar&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">samples</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.io.writer.ShardWriter.next_stream">
<span class="sig-name descname"><span class="pre">next_stream</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/writer.py#L151-L161"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.writer.ShardWriter.next_stream" title="Permalink to this definition">#</a></dt>
<dd><p>Close the current stream and move to the next.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.io.writer.ShardWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/writer.py#L163-L180"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.writer.ShardWriter.write" title="Permalink to this definition">#</a></dt>
<dd><p>Write a sample.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> -- sample to be written</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="egrecho.utils.io.writer.ShardWriter.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/wangers/subtools2/tree/master/egrecho/utils/io/writer.py#L203-L208"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#egrecho.utils.io.writer.ShardWriter.close" title="Permalink to this definition">#</a></dt>
<dd><p>Finish all writing.</p>
</dd></dl>

</dd></dl>

</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="egrecho.utils.patch.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">egrecho.utils.patch.io_patch</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="egrecho.utils.dummy.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">egrecho.utils.dummy.generate</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Dexin Liao
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">egrecho.utils.io.files</a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.files.is_remote_url"><code class="docutils literal notranslate"><span class="pre">is_remote_url()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.files.get_filename"><code class="docutils literal notranslate"><span class="pre">get_filename()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.files.DataFilesList"><code class="docutils literal notranslate"><span class="pre">DataFilesList</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.files.sanitize_patterns"><code class="docutils literal notranslate"><span class="pre">sanitize_patterns()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.files.DataFilesDict"><code class="docutils literal notranslate"><span class="pre">DataFilesDict</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.files.resolve_patterns_locally_or_by_urls"><code class="docutils literal notranslate"><span class="pre">resolve_patterns_locally_or_by_urls()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.files.resolve_patterns"><code class="docutils literal notranslate"><span class="pre">resolve_patterns()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.files.resolve_file"><code class="docutils literal notranslate"><span class="pre">resolve_file()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-egrecho.utils.io.kaldi">egrecho.utils.io.kaldi</a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.valid_kaldi_storage_name"><code class="docutils literal notranslate"><span class="pre">valid_kaldi_storage_name()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.close_cached_kaldi_handles"><code class="docutils literal notranslate"><span class="pre">close_cached_kaldi_handles()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.lookup_matrix_reader_cache_or_open"><code class="docutils literal notranslate"><span class="pre">lookup_matrix_reader_cache_or_open()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.lookup_vector_reader_cache_or_open"><code class="docutils literal notranslate"><span class="pre">lookup_vector_reader_cache_or_open()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.KaldiVectorReader"><code class="docutils literal notranslate"><span class="pre">KaldiVectorReader</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.KaldiVectorWriter"><code class="docutils literal notranslate"><span class="pre">KaldiVectorWriter</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.KaldiMatrixReader"><code class="docutils literal notranslate"><span class="pre">KaldiMatrixReader</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.kaldi.KaldiMatrixWriter"><code class="docutils literal notranslate"><span class="pre">KaldiMatrixWriter</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-egrecho.utils.io.reader">egrecho.utils.io.reader</a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.reader.JsonlIterable"><code class="docutils literal notranslate"><span class="pre">JsonlIterable</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.reader.JsonIterable"><code class="docutils literal notranslate"><span class="pre">JsonIterable</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.reader.CsvIterable"><code class="docutils literal notranslate"><span class="pre">CsvIterable</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-egrecho.utils.io.resolve_ckpt">egrecho.utils.io.resolve_ckpt</a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.resolve_ckpt.resolve_ckpt"><code class="docutils literal notranslate"><span class="pre">resolve_ckpt()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.resolve_ckpt.resolve_version_ckpt"><code class="docutils literal notranslate"><span class="pre">resolve_version_ckpt()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.resolve_ckpt.resolve_rel_ckpt"><code class="docutils literal notranslate"><span class="pre">resolve_rel_ckpt()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-egrecho.utils.io.utils">egrecho.utils.io.utils</a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.utils.auto_open"><code class="docutils literal notranslate"><span class="pre">auto_open()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.JsonMixin"><code class="docutils literal notranslate"><span class="pre">JsonMixin</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.YamlMixin"><code class="docutils literal notranslate"><span class="pre">YamlMixin</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.ConfigFileMixin"><code class="docutils literal notranslate"><span class="pre">ConfigFileMixin</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.SerializationFn"><code class="docutils literal notranslate"><span class="pre">SerializationFn</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.load_jsonl_lazy"><code class="docutils literal notranslate"><span class="pre">load_jsonl_lazy()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.save_jsonl"><code class="docutils literal notranslate"><span class="pre">save_jsonl()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.load_csv_lazy"><code class="docutils literal notranslate"><span class="pre">load_csv_lazy()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.repr_dict"><code class="docutils literal notranslate"><span class="pre">repr_dict()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.buf_count_newlines"><code class="docutils literal notranslate"><span class="pre">buf_count_newlines()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.read_key_first_lists"><code class="docutils literal notranslate"><span class="pre">read_key_first_lists()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.read_lists"><code class="docutils literal notranslate"><span class="pre">read_lists()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.read_key_first_lists_lazy"><code class="docutils literal notranslate"><span class="pre">read_key_first_lists_lazy()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.utils.read_lists_lazy"><code class="docutils literal notranslate"><span class="pre">read_lists_lazy()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-egrecho.utils.io.writer">egrecho.utils.io.writer</a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.writer.SequentialDewWriter"><code class="docutils literal notranslate"><span class="pre">SequentialDewWriter</span></code></a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.writer.SequentialDewWriter.write"><code class="docutils literal notranslate"><span class="pre">SequentialDewWriter.write()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#egrecho.utils.io.writer.ShardWriter"><code class="docutils literal notranslate"><span class="pre">ShardWriter</span></code></a><ul>
<li><a class="reference internal" href="#egrecho.utils.io.writer.ShardWriter.next_stream"><code class="docutils literal notranslate"><span class="pre">ShardWriter.next_stream()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.writer.ShardWriter.write"><code class="docutils literal notranslate"><span class="pre">ShardWriter.write()</span></code></a></li>
<li><a class="reference internal" href="#egrecho.utils.io.writer.ShardWriter.close"><code class="docutils literal notranslate"><span class="pre">ShardWriter.close()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=4ea706d9"></script>
    <script src="../../_static/tabs.js?v=3ee01567"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    </body>
</html>